"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[196],{42251:function(n,t,e){e.d(t,{Qq:function(){return s},lq:function(){return d},yd:function(){return l}});var r=e(74165),o=e(15861),a=e(31881),c=e.n(a),i=(e(70816),e(50804)),u=e(47444),s=function(){return function(n){c().get("".concat("https://dental-app-backend.herokuapp.com","/api/branches")).then((function(t){n(h(t.data))})).catch((function(t){console.log(t),n((0,u.sT)("Ha ocurrido un problema al cargar los registros."))}))}},l=function(n){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/branches"),n).then((function(n){e(p(n.data)),e((0,u.xM)("Registro creado con exito."))})).catch((function(n){e((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},d=function(n,t){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/branches/").concat(t),n).then((function(t){o(f(n)),o((0,u.xM)("Registro actualizado con exito."))})).catch((function(n){o((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=function(n){return{type:i.V.createBranch,payload:n}},f=function(n){return{type:i.V.updateBranch,payload:n}},h=function(n){return{type:i.V.getBranches,payload:n}}},29077:function(n,t,e){e.d(t,{$N:function(){return d},JL:function(){return s},Mg:function(){return l},Oo:function(){return p}});var r=e(74165),o=e(15861),a=e(31881),c=e.n(a),i=(e(70816),e(50804)),u=e(47444),s=function(){return function(n){c().get("".concat("https://dental-app-backend.herokuapp.com","/api/customers/all")).then((function(t){console.log(t),n(h(t.data))})).catch((function(t){n((0,u.sT)("Ha ocurrido un problema al cargar los registros.")),console.log(t)}))}},l=function(n){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/customers"),n).then((function(n){e({type:"resetState"}),e(p(0,"")),e((0,u.xM)("Registro creado con exito."))})).catch((function(n){e((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},d=function(n,t){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/customers/").concat(t),n).then((function(t){o(f(n)),o((0,u.xM)("Registro actualizado con exito."))})).catch((function(n){o((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=function(n,t){return function(e){c().get("".concat("https://dental-app-backend.herokuapp.com","/api/customers"),{params:{offset:n,limit:10,search:t}}).then((function(n){e({type:i.V.getInfiniteCustomers,payload:n.data.rows})})).catch((function(n){e((0,u.sT)("Ha ocurrido un problema al cargar los registros."))}))}},f=function(n){return{type:i.V.updateInfiniteCustomer,payload:n}},h=function(n){return{type:i.V.getCustomers,payload:n}}},11916:function(n,t,e){e.d(t,{LY:function(){return l},QX:function(){return d},xJ:function(){return s}});var r=e(74165),o=e(15861),a=e(31881),c=e.n(a),i=e(50804),u=e(47444),s=function(){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("".concat("https://dental-app-backend.herokuapp.com","/api/roles")).then((function(n){t(f(n.data))})).catch((function(n){t((0,u.sT)("Ha ocurrido un problema al cargar los registros.")),console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},l=function(n){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/roles"),n).then((function(n){console.log(n),e(p(n.data)),e((0,u.xM)("Registro creado con exito."))})).catch((function(n){e((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},d=function(n,t){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/roles/").concat(t),n).then((function(n){o(s()),console.log(n),o((0,u.xM)("Registro actualizado con exito."))})).catch((function(n){o((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=function(n){return{type:i.V.createRole,payload:n}},f=function(n){return{type:i.V.getRoles,payload:n}}},81019:function(n,t,e){e.d(t,{AW:function(){return s},L5:function(){return l},Ul:function(){return p},pp:function(){return d}});var r=e(74165),o=e(15861),a=e(31881),c=e.n(a),i=e(50804),u=e(47444),s=function(){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("".concat("https://dental-app-backend.herokuapp.com","/api/users")).then((function(n){console.log(n),t(m(n.data))})).catch((function(n){t((0,u.sT)("Ha ocurrido un problema al cargar los registros.")),console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},l=function(n){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/users"),n).then((function(n){e(f(n.data)),e((0,u.xM)("Registro creado con exito."))})).catch((function(n){e((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},d=function(n,t){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/users/").concat(t),n).then((function(t){o(h(n)),o((0,u.xM)("Registro actualizado con exito."))})).catch((function(n){o((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=function(n,t){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),console.log(t),e.next=4,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/users/changePassword/").concat(t),n).then((function(n){})).catch((function(n){console.log(n)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},f=function(n){return{type:i.V.createUser,payload:n}},h=function(n){return{type:i.V.updateUser,payload:n}},m=function(n){return{type:i.V.getUsers,payload:n}}},96196:function(n,t,e){e.r(t),e.d(t,{default:function(){return W}});var r=e(29439),o=e(97241),a=e(82277),c=e(47313),i=e(1084),u=e(81019),s=e(98456),l=e(87913),d=e(7501),p=e(9019),f=e(72315),h=e(46417),m={id:0,password:"",confirmPassword:""},v=function(n){var t=n.recordForEdit,e=n.addOrEdit,r=n.cancelForm,o=(0,l.c)(m),a=o.values,i=o.setValues,u=o.handleInputChange,s=o.resetForm;f.WS.addValidationRule("isPasswordMatch",(function(n){return n===a.password})),(0,c.useEffect)((function(){return null!=t&&t.id&&i({id:t.id,password:"",confirmPassword:""}),function(){f.WS.removeValidationRule("isPasswordMatch")}}),[t]);return(0,h.jsx)(l.l,{onSubmit:function(n){n.preventDefault(),e(a,s)},children:(0,h.jsxs)(p.ZP,{container:!0,rowSpacing:0,columnSpacing:2,children:[(0,h.jsx)(p.ZP,{item:!0,xs:12,children:(0,h.jsx)("h4",{children:"Cambiar Contrase\xf1a"})}),(0,h.jsx)(p.ZP,{item:!0,xs:12,children:(0,h.jsx)(d.Z.FormInput,{label:"Contrase\xf1a",name:"password",type:"password",value:a.password,onChange:u,required:!0})}),(0,h.jsx)(p.ZP,{item:!0,xs:12,children:(0,h.jsx)(d.Z.FormInput,{label:"Confirmar Contrase\xf1a",type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:u,validators:["isPasswordMatch"],errorMessages:["Las contrase\xf1as no coinciden"],required:!0})}),(0,h.jsxs)(p.ZP,{item:!0,xs:12,style:{textAlign:"right",paddingTop:5},children:[(0,h.jsx)(d.Z.FormButton,{variant:"text",color:"default",size:"large",text:"Cancelar",onClick:function(){r(s)}}),(0,h.jsx)(d.Z.FormButton,{variant:"contained",color:"primary",type:"submit",size:"large",text:"Guardar"})]})]})})},x=e(1413),g={id:0,name:"",lastname:"",roleId:"",branchId:"",phone:"",email:"",password:"",birth_date:new Date,address:""},Z=function(n){var t=n.recordForEdit,e=n.addOrEdit,r=n.cancelForm,o=(0,l.c)(g),a=o.values,u=o.setValues,s=o.handleInputChange,f=o.resetForm,m=(0,i.v9)((function(n){return n.branches})),v=(0,i.v9)((function(n){return n.roles}));(0,c.useEffect)((function(){null!=t&&(console.log(t),t.id&&u((0,x.Z)({},t)))}),[t]);return(0,h.jsx)(l.l,{onSubmit:function(n){n.preventDefault(),e(a,f)},children:(0,h.jsxs)(p.ZP,{container:!0,rowSpacing:0,columnSpacing:2,children:[(0,h.jsx)(p.ZP,{item:!0,xs:6,sm:3,children:(0,h.jsx)(d.Z.FormInput,{label:"Nombre",name:"name",value:a.name,onChange:s,required:!0})}),(0,h.jsx)(p.ZP,{item:!0,xs:6,sm:3,children:(0,h.jsx)(d.Z.FormInput,{label:"Apellido(s)",name:"lastname",value:a.lastname,onChange:s,required:!0})}),(0,h.jsx)(p.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsx)(d.Z.FormSelect,{name:"branchId",label:"Sucursal",value:a.branchId,onChange:s,items:null!==t&&void 0!==t&&t.id?m:m.filter((function(n){return n.status})),required:!0})}),(0,h.jsxs)(p.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsx)(d.Z.FormInput,{label:"Tel\xe9fono",name:"phone",value:a.phone,onChange:s,required:!0}),(0,h.jsx)(d.Z.FormInput,{label:"Direcci\xf3n",name:"address",value:a.address,onChange:s,required:!0}),(0,h.jsx)(d.Z.FormDatePicker,{name:"birth_date",label:"Fecha de nacimiento",value:a.birth_date,onChange:s,required:!0})]}),(0,h.jsxs)(p.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsx)(d.Z.FormSelect,{name:"roleId",label:"Rol",value:a.roleId,onChange:s,items:null!==t&&void 0!==t&&t.id?v:v.filter((function(n){return n.status})),required:!0}),(0,h.jsx)(d.Z.FormInput,{label:"Correo electronico",name:"email",value:a.email,onChange:s,validators:["isEmail"],errorMessages:["Ingresar email v\xe1lido"],required:!0}),(0,h.jsx)(d.Z.FormInput,{label:"Contrase\xf1a",name:"password",value:a.password,onChange:s,required:!0,hidden:t&&!0})]}),(0,h.jsxs)(p.ZP,{item:!0,xs:12,style:{textAlign:"right",paddingTop:5},children:[(0,h.jsx)(d.Z.FormButton,{variant:"text",color:"default",size:"large",text:"Cancelar",onClick:function(){r(f)}}),(0,h.jsx)(d.Z.FormButton,{variant:"contained",color:"primary",type:"submit",size:"large",text:"Guardar"})]})]})})},b=e(40490),j=e.n(b),w=e(53838),k=e(61091),y=e(79632),C=e(56863),F=e(11163),z=e(50884),I=e(63185),P=e(64676),M=e(56155),T=e(77166),V=e(16541),H=e(11901),S=e(39615),R=e(70816),E=e.n(R),A=e(64154),_=e(98896),q=e(42251),U=e(11916),B=(e(58228),e(43619),e(40671)),D=(e(29077),e(84221)),L=e(29137),O=e(62950),Y=function(n){var t=[{title:(0,h.jsx)(V.T,{Icon:F.Z,title:"Nombre"}),field:"name"},{title:(0,h.jsx)(V.T,{Icon:z.Z,title:"Apellido(s)"}),field:"lastname"},{title:(0,h.jsx)(V.T,{Icon:I.Z,title:"Rol"}),field:"role.name"},{title:(0,h.jsx)(V.T,{Icon:P.Z,title:"Sucursal"}),field:"branch.name"},{title:(0,h.jsx)(V.T,{Icon:k.Z,title:"Tel\xe9fono"}),field:"phone"},{title:(0,h.jsx)(V.T,{Icon:y.Z,title:"Correo Electronico"}),field:"email"},{title:(0,h.jsx)(V.T,{Icon:C.Z,title:"Fecha de registro"}),field:"createdAt",type:"date",defaultSort:"desc",render:function(n){return E()(n.createdAt).format("DD/MM/YYYY")}}],e=n.setOpenPopup,r=n.setRecordForEdit,o=n.setFormShow,a=(0,i.I0)(),s=(0,i.v9)((function(n){return n.users})),l=(0,i.v9)((function(n){return n.roles})),d=(0,i.v9)((function(n){return n.branches}));return(0,c.useEffect)((function(){0===l.length&&a((0,U.xJ)()),0===d.length&&a((0,q.Qq)()),0===s.length&&a((0,u.AW)())}),[]),(0,c.useMemo)((function(){return(0,h.jsx)(h.Fragment,{children:null!=s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(T.T,{title:"Usuarios"}),(0,h.jsx)(j(),{localization:S._,icons:A.P,columns:t,data:s,actions:[{icon:"save",tooltip:"Save User",onClick:function(n,t){return e(!0)},isFreeAction:!0},{icon:function(){return(0,h.jsx)(w.Z,{style:{color:"#1380C7"}})},tooltip:"Editar paciente",onClick:function(n,t){o("UserForm"),e(!0),r(t)}},{icon:function(){return(0,h.jsx)(O.Z,{style:{color:"#1380C7"}})},tooltip:"Cambiar Contrase\xf1a",onClick:function(n,t){e(!0),r(t),o("ChangePasswordForm")}},function(n){return{icon:function(){return n.status?(0,h.jsx)(L.Z,{style:{color:"#1380C7"}}):(0,h.jsx)(D.Z,{style:{color:"#1380C7"}})},tooltip:n.status?"Inactivar":"Activar",onClick:function(n,t){t.status=!t.status,a((0,u.pp)(t,t.id))}}}],components:{Action:function(n){return(0,h.jsx)(h.Fragment,{children:"save"===n.action.icon?(0,h.jsx)(H.J,{onClick:function(t){return n.action.onClick(t,n.data)}}):(0,h.jsx)(b.MTableAction,(0,x.Z)({},n))})},Row:function(n){return(0,h.jsx)(b.MTableBodyRow,(0,x.Z)((0,x.Z)({},n),{},{onDoubleClick:function(t){o("UserForm"),e(!0),r(n.data)}}))}},options:{search:!0,draggable:!1,showTitle:!1,thirdSortClick:!1,searchFieldAlignment:"left",actionsColumnIndex:-1,searchFieldVariant:"outlined",searchFieldStyle:{margin:15},headerStyle:_.i,rowStyle:B.Z}})]}):(0,h.jsx)(M.$,{})})}),[s])},J=(0,o.Z)((function(n){return{pageContent:{margin:n.spacing(3),padding:n.spacing(3)},searchInput:{width:"75%"}}})),W=function(){var n=(0,i.I0)(),t=(0,c.useState)(!1),e=(0,r.Z)(t,2),o=e[0],l=e[1],d=(0,c.useState)("UserForm"),p=(0,r.Z)(d,2),f=p[0],m=p[1],x=(0,c.useState)(null),g=(0,r.Z)(x,2),b=g[0],j=g[1],w=(J(),function(t,e){0===t.id?(delete t.id,n((0,u.L5)(t))):(delete t.tableData,t.confirmPassword?n((0,u.Ul)(t,t.id)):n((0,u.pp)(t,t.id))),e(),j(null),l(!1)}),k=function(n){j(null),n(),l(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.Z,{children:(0,h.jsx)(Y,{setOpenPopup:l,setRecordForEdit:j,setFormShow:m})}),(0,h.jsx)(s.Y,{openPopup:o,setOpenPopup:l,setRecordForEdit:j,title:"Usuario",children:"UserForm"===f?(0,h.jsx)(Z,{recordForEdit:b,addOrEdit:w,cancelForm:k}):(0,h.jsx)(v,{recordForEdit:b,addOrEdit:w,cancelForm:k})})]})}},63185:function(n,t,e){var r=e(95318);t.Z=void 0;var o=r(e(45045)),a=e(46417),c=(0,o.default)([(0,a.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},"0"),(0,a.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},"1")],"AdminPanelSettings");t.Z=c},64676:function(n,t,e){var r=e(95318);t.Z=void 0;var o=r(e(45045)),a=e(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"}),"Business");t.Z=c},79632:function(n,t,e){var r=e(95318);t.Z=void 0;var o=r(e(45045)),a=e(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Email");t.Z=c},62950:function(n,t,e){var r=e(95318);t.Z=void 0;var o=r(e(45045)),a=e(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04L21 10zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"}),"Key");t.Z=c},11163:function(n,t,e){var r=e(95318);t.Z=void 0;var o=r(e(45045)),a=e(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");t.Z=c},50884:function(n,t,e){var r=e(95318);t.Z=void 0;var o=r(e(45045)),a=e(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4zm-2 0c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4zm2 0c.2-.71 3.3-2 6-2 2.69 0 5.78 1.28 6 2H3zm17-3v-3h3v-2h-3V7h-2v3h-3v2h3v3h2z"}),"PersonAddAlt");t.Z=c}}]);