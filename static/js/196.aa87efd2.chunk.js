"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[196],{42251:function(n,e,t){t.d(e,{Qq:function(){return s},lq:function(){return d},yd:function(){return l}});var r=t(74165),o=t(15861),a=t(31881),c=t.n(a),i=(t(70816),t(50804)),u=t(47444),s=function(){return function(n){c().get("".concat("https://dental-app-backend.herokuapp.com","/api/branches")).then((function(e){n(h(e.data))})).catch((function(e){console.log(e),n((0,u.sT)("Ha ocurrido un problema al cargar los registros."))}))}},l=function(n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/branches"),n).then((function(n){t(p(n.data)),t((0,u.xM)("Registro creado con exito."))})).catch((function(n){t((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},d=function(n,e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/branches/").concat(e),n).then((function(e){o(f(n)),o((0,u.xM)("Registro actualizado con exito."))})).catch((function(n){o((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},p=function(n){return{type:i.V.createBranch,payload:n}},f=function(n){return{type:i.V.updateBranch,payload:n}},h=function(n){return{type:i.V.getBranches,payload:n}}},29077:function(n,e,t){t.d(e,{JL:function(){return s},Mz:function(){return d},gj:function(){return l}});var r=t(74165),o=t(15861),a=t(31881),c=t.n(a),i=(t(70816),t(50804)),u=t(47444),s=function(){return function(n){c().get("".concat("https://dental-app-backend.herokuapp.com","/api/customers/all")).then((function(e){console.log(e),n(h(e.data))})).catch((function(e){n((0,u.sT)("Ha ocurrido un problema al cargar los registros.")),console.log(e)}))}},l=function(n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/customers"),n).then((function(n){t(p(n.data)),t((0,u.xM)("Registro creado con exito."))})).catch((function(n){t((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},d=function(n,e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/customers/").concat(e),n).then((function(e){o(f(n)),o((0,u.xM)("Registro actualizado con exito."))})).catch((function(n){o((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},p=function(n){return{type:i.V.createCustomer,payload:n}},f=function(n){return{type:i.V.updateCustomer,payload:n}},h=function(n){return{type:i.V.getCustomers,payload:n}}},11916:function(n,e,t){t.d(e,{LY:function(){return l},QX:function(){return d},xJ:function(){return s}});var r=t(74165),o=t(15861),a=t(31881),c=t.n(a),i=t(50804),u=t(47444),s=function(){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("".concat("https://dental-app-backend.herokuapp.com","/api/roles")).then((function(n){e(f(n.data))})).catch((function(n){e((0,u.sT)("Ha ocurrido un problema al cargar los registros.")),console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},l=function(n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/roles"),n).then((function(n){console.log(n),t(p(n.data)),t((0,u.xM)("Registro creado con exito."))})).catch((function(n){t((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},d=function(n,e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/roles/").concat(e),n).then((function(n){o(s()),console.log(n),o((0,u.xM)("Registro actualizado con exito."))})).catch((function(n){o((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},p=function(n){return{type:i.V.createRole,payload:n}},f=function(n){return{type:i.V.getRoles,payload:n}}},81019:function(n,e,t){t.d(e,{AW:function(){return s},L5:function(){return l},Ul:function(){return p},pp:function(){return d}});var r=t(74165),o=t(15861),a=t(31881),c=t.n(a),i=t(50804),u=t(47444),s=function(){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("".concat("https://dental-app-backend.herokuapp.com","/api/users")).then((function(n){console.log(n),e(m(n.data))})).catch((function(n){e((0,u.sT)("Ha ocurrido un problema al cargar los registros.")),console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},l=function(n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/users"),n).then((function(n){t(f(n.data)),t((0,u.xM)("Registro creado con exito."))})).catch((function(n){t((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},d=function(n,e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/users/").concat(e),n).then((function(e){o(h(n)),o((0,u.xM)("Registro actualizado con exito."))})).catch((function(n){o((0,u.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},p=function(n,e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),console.log(e),t.next=4,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/users/changePassword/").concat(e),n).then((function(n){})).catch((function(n){console.log(n)}));case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},f=function(n){return{type:i.V.createUser,payload:n}},h=function(n){return{type:i.V.updateUser,payload:n}},m=function(n){return{type:i.V.getUsers,payload:n}}},96196:function(n,e,t){t.r(e),t.d(e,{default:function(){return W}});var r=t(29439),o=t(97241),a=t(82277),c=t(47313),i=t(1084),u=t(81019),s=t(98456),l=t(87913),d=t(7501),p=t(9019),f=t(72315),h=t(46417),m={id:0,password:"",confirmPassword:""},v=function(n){var e=n.recordForEdit,t=n.addOrEdit,r=n.cancelForm,o=(0,l.c)(m),a=o.values,i=o.setValues,u=o.handleInputChange,s=o.resetForm;f.WS.addValidationRule("isPasswordMatch",(function(n){return n===a.password})),(0,c.useEffect)((function(){return null!=e&&e.id&&i({id:e.id,password:"",confirmPassword:""}),function(){f.WS.removeValidationRule("isPasswordMatch")}}),[e]);return(0,h.jsx)(l.l,{onSubmit:function(n){n.preventDefault(),t(a,s)},children:(0,h.jsxs)(p.ZP,{container:!0,rowSpacing:0,columnSpacing:2,children:[(0,h.jsx)(p.ZP,{item:!0,xs:12,children:(0,h.jsx)("h4",{children:"Cambiar Contrase\xf1a"})}),(0,h.jsx)(p.ZP,{item:!0,xs:12,children:(0,h.jsx)(d.Z.FormInput,{label:"Contrase\xf1a",name:"password",type:"password",value:a.password,onChange:u,required:!0})}),(0,h.jsx)(p.ZP,{item:!0,xs:12,children:(0,h.jsx)(d.Z.FormInput,{label:"Confirmar Contrase\xf1a",type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:u,validators:["isPasswordMatch"],errorMessages:["Las contrase\xf1as no coinciden"],required:!0})}),(0,h.jsxs)(p.ZP,{item:!0,xs:12,style:{textAlign:"right",paddingTop:5},children:[(0,h.jsx)(d.Z.FormButton,{variant:"text",color:"default",size:"large",text:"Cancelar",onClick:function(){r(s)}}),(0,h.jsx)(d.Z.FormButton,{variant:"contained",color:"primary",type:"submit",size:"large",text:"Guardar"})]})]})})},x=t(1413),g={id:0,name:"",lastname:"",roleId:"",branchId:"",phone:"",email:"",password:"",birth_date:new Date,address:""},Z=function(n){var e=n.recordForEdit,t=n.addOrEdit,r=n.cancelForm,o=(0,l.c)(g),a=o.values,u=o.setValues,s=o.handleInputChange,f=o.resetForm,m=(0,i.v9)((function(n){return n.branches})),v=(0,i.v9)((function(n){return n.roles}));(0,c.useEffect)((function(){null!=e&&(console.log(e),e.id&&u((0,x.Z)({},e)))}),[e]);return(0,h.jsx)(l.l,{onSubmit:function(n){n.preventDefault(),t(a,f)},children:(0,h.jsxs)(p.ZP,{container:!0,rowSpacing:0,columnSpacing:2,children:[(0,h.jsx)(p.ZP,{item:!0,xs:6,sm:3,children:(0,h.jsx)(d.Z.FormInput,{label:"Nombre",name:"name",value:a.name,onChange:s,required:!0})}),(0,h.jsx)(p.ZP,{item:!0,xs:6,sm:3,children:(0,h.jsx)(d.Z.FormInput,{label:"Apellido(s)",name:"lastname",value:a.lastname,onChange:s,required:!0})}),(0,h.jsx)(p.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsx)(d.Z.FormSelect,{name:"branchId",label:"Sucursal",value:a.branchId,onChange:s,items:null!==e&&void 0!==e&&e.id?m:m.filter((function(n){return n.status})),required:!0})}),(0,h.jsxs)(p.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsx)(d.Z.FormInput,{label:"Tel\xe9fono",name:"phone",value:a.phone,onChange:s,required:!0}),(0,h.jsx)(d.Z.FormInput,{label:"Direcci\xf3n",name:"address",value:a.address,onChange:s,required:!0}),(0,h.jsx)(d.Z.FormDatePicker,{name:"birth_date",label:"Fecha de nacimiento",value:a.birth_date,onChange:s,required:!0})]}),(0,h.jsxs)(p.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsx)(d.Z.FormSelect,{name:"roleId",label:"Rol",value:a.roleId,onChange:s,items:null!==e&&void 0!==e&&e.id?v:v.filter((function(n){return n.status})),required:!0}),(0,h.jsx)(d.Z.FormInput,{label:"Correo electronico",name:"email",value:a.email,onChange:s,validators:["isEmail"],errorMessages:["Ingresar email v\xe1lido"],required:!0}),(0,h.jsx)(d.Z.FormInput,{label:"Contrase\xf1a",name:"password",value:a.password,onChange:s,required:!0,hidden:e&&!0})]}),(0,h.jsxs)(p.ZP,{item:!0,xs:12,style:{textAlign:"right",paddingTop:5},children:[(0,h.jsx)(d.Z.FormButton,{variant:"text",color:"default",size:"large",text:"Cancelar",onClick:function(){r(f)}}),(0,h.jsx)(d.Z.FormButton,{variant:"contained",color:"primary",type:"submit",size:"large",text:"Guardar"})]})]})})},j=t(40490),b=t.n(j),w=t(53838),k=t(61091),y=t(79632),C=t(56863),F=t(11163),z=t(50884),P=t(63185),I=t(64676),M=t(56155),T=t(77166),V=t(16541),H=t(11901),S=t(39615),R=t(70816),E=t.n(R),A=t(64154),_=t(98896),q=t(42251),U=t(11916),B=(t(58228),t(43619),t(40671)),D=(t(29077),t(84221)),L=t(29137),O=t(62950),Y=function(n){var e=[{title:(0,h.jsx)(V.T,{Icon:F.Z,title:"Nombre"}),field:"name"},{title:(0,h.jsx)(V.T,{Icon:z.Z,title:"Apellido(s)"}),field:"lastname"},{title:(0,h.jsx)(V.T,{Icon:P.Z,title:"Rol"}),field:"role.name"},{title:(0,h.jsx)(V.T,{Icon:I.Z,title:"Sucursal"}),field:"branch.name"},{title:(0,h.jsx)(V.T,{Icon:k.Z,title:"Tel\xe9fono"}),field:"phone"},{title:(0,h.jsx)(V.T,{Icon:y.Z,title:"Correo Electronico"}),field:"email"},{title:(0,h.jsx)(V.T,{Icon:C.Z,title:"Fecha de registro"}),field:"createdAt",type:"date",defaultSort:"desc",render:function(n){return E()(n.createdAt).format("DD/MM/YYYY")}}],t=n.setOpenPopup,r=n.setRecordForEdit,o=n.setFormShow,a=(0,i.I0)(),s=(0,i.v9)((function(n){return n.users})),l=(0,i.v9)((function(n){return n.roles})),d=(0,i.v9)((function(n){return n.branches}));return(0,c.useEffect)((function(){0===l.length&&a((0,U.xJ)()),0===d.length&&a((0,q.Qq)()),0===s.length&&a((0,u.AW)())}),[]),(0,c.useMemo)((function(){return(0,h.jsx)(h.Fragment,{children:null!=s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(T.T,{title:"Usuarios"}),(0,h.jsx)(b(),{localization:S._,icons:A.P,columns:e,data:s,actions:[{icon:"save",tooltip:"Save User",onClick:function(n,e){return t(!0)},isFreeAction:!0},{icon:function(){return(0,h.jsx)(w.Z,{style:{color:"#1380C7"}})},tooltip:"Editar paciente",onClick:function(n,e){o("UserForm"),t(!0),r(e)}},{icon:function(){return(0,h.jsx)(O.Z,{style:{color:"#1380C7"}})},tooltip:"Cambiar Contrase\xf1a",onClick:function(n,e){t(!0),r(e),o("ChangePasswordForm")}},function(n){return{icon:function(){return n.status?(0,h.jsx)(L.Z,{style:{color:"#1380C7"}}):(0,h.jsx)(D.Z,{style:{color:"#1380C7"}})},tooltip:n.status?"Inactivar":"Activar",onClick:function(n,e){e.status=!e.status,a((0,u.pp)(e,e.id))}}}],components:{Action:function(n){return(0,h.jsx)(h.Fragment,{children:"save"===n.action.icon?(0,h.jsx)(H.J,{onClick:function(e){return n.action.onClick(e,n.data)}}):(0,h.jsx)(j.MTableAction,(0,x.Z)({},n))})},Row:function(n){return(0,h.jsx)(j.MTableBodyRow,(0,x.Z)((0,x.Z)({},n),{},{onDoubleClick:function(e){o("UserForm"),t(!0),r(n.data)}}))}},options:{search:!0,draggable:!1,showTitle:!1,thirdSortClick:!1,searchFieldAlignment:"left",actionsColumnIndex:-1,searchFieldVariant:"outlined",searchFieldStyle:{margin:15},headerStyle:_.i,rowStyle:B.Z}})]}):(0,h.jsx)(M.$,{})})}),[s])},J=(0,o.Z)((function(n){return{pageContent:{margin:n.spacing(3),padding:n.spacing(3)},searchInput:{width:"75%"}}})),W=function(){var n=(0,i.I0)(),e=(0,c.useState)(!1),t=(0,r.Z)(e,2),o=t[0],l=t[1],d=(0,c.useState)("UserForm"),p=(0,r.Z)(d,2),f=p[0],m=p[1],x=(0,c.useState)(null),g=(0,r.Z)(x,2),j=g[0],b=g[1],w=(J(),function(e,t){0===e.id?(delete e.id,n((0,u.L5)(e))):(delete e.tableData,e.confirmPassword?n((0,u.Ul)(e,e.id)):n((0,u.pp)(e,e.id))),t(),b(null),l(!1)}),k=function(n){b(null),n(),l(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.Z,{children:(0,h.jsx)(Y,{setOpenPopup:l,setRecordForEdit:b,setFormShow:m})}),(0,h.jsx)(s.Y,{openPopup:o,setOpenPopup:l,setRecordForEdit:b,title:"Usuario",children:"UserForm"===f?(0,h.jsx)(Z,{recordForEdit:j,addOrEdit:w,cancelForm:k}):(0,h.jsx)(v,{recordForEdit:j,addOrEdit:w,cancelForm:k})})]})}},63185:function(n,e,t){var r=t(95318);e.Z=void 0;var o=r(t(45045)),a=t(46417),c=(0,o.default)([(0,a.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},"0"),(0,a.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},"1")],"AdminPanelSettings");e.Z=c},64676:function(n,e,t){var r=t(95318);e.Z=void 0;var o=r(t(45045)),a=t(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"}),"Business");e.Z=c},79632:function(n,e,t){var r=t(95318);e.Z=void 0;var o=r(t(45045)),a=t(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Email");e.Z=c},62950:function(n,e,t){var r=t(95318);e.Z=void 0;var o=r(t(45045)),a=t(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04L21 10zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"}),"Key");e.Z=c},11163:function(n,e,t){var r=t(95318);e.Z=void 0;var o=r(t(45045)),a=t(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");e.Z=c},50884:function(n,e,t){var r=t(95318);e.Z=void 0;var o=r(t(45045)),a=t(46417),c=(0,o.default)((0,a.jsx)("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4zm-2 0c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4zm2 0c.2-.71 3.3-2 6-2 2.69 0 5.78 1.28 6 2H3zm17-3v-3h3v-2h-3V7h-2v3h-3v2h3v3h2z"}),"PersonAddAlt");e.Z=c}}]);