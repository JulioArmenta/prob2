"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[78],{42251:function(n,t,e){e.d(t,{Qq:function(){return s},lq:function(){return l},yd:function(){return u}});var a=e(74165),r=e(15861),o=e(31881),c=e.n(o),i=(e(70816),e(50804)),s=function(){return function(n){c().get("https://dental-app-backend.herokuapp.com/api/branches").then((function(t){console.log(t),n(m(t.data))})).catch((function(n){console.log(n)}))}},u=function(n){return function(){var t=(0,r.Z)((0,a.Z)().mark((function t(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().post("https://dental-app-backend.herokuapp.com/api/branches",n).then((function(n){e(d(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},l=function(n,t){return function(){var e=(0,r.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().put("https://dental-app-backend.herokuapp.com/api/branches/".concat(t),n).then((function(t){r(p(n))})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},d=function(n){return{type:i.V.createBranch,payload:n}},p=function(n){return{type:i.V.updateBranch,payload:n}},m=function(n){return{type:i.V.getBranches,payload:n}}},29077:function(n,t,e){e.d(t,{JL:function(){return s},Mz:function(){return l},gj:function(){return u}});var a=e(74165),r=e(15861),o=e(31881),c=e.n(o),i=(e(70816),e(50804)),s=function(){return function(n){c().get("https://dental-app-backend.herokuapp.com/api/customers").then((function(t){console.log(t),n(m(t.data))})).catch((function(n){console.log(n)}))}},u=function(n){return function(){var t=(0,r.Z)((0,a.Z)().mark((function t(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().post("https://dental-app-backend.herokuapp.com/api/customers",n).then((function(n){e(d(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},l=function(n,t){return function(){var e=(0,r.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().put("https://dental-app-backend.herokuapp.com/api/customers/".concat(t),n).then((function(t){r(p(n))})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},d=function(n){return{type:i.V.createCustomer,payload:n}},p=function(n){return{type:i.V.updateCustomer,payload:n}},m=function(n){return{type:i.V.getCustomers,payload:n}}},87913:function(n,t,e){e.d(t,{c:function(){return p},l:function(){return f}});var a=e(45987),r=e(4942),o=e(1413),c=e(29439),i=e(97241),s=e(47313),u=e(72315),l=e(46417),d=["children"],p=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2?arguments[2]:void 0,a=(0,s.useState)(n),i=(0,c.Z)(a,2),u=i[0],l=i[1],d=(0,s.useState)({}),p=(0,c.Z)(d,2),m=p[0],f=p[1],h=function(n){var a=n.target,c=a.name,i=a.value;l((0,o.Z)((0,o.Z)({},u),{},(0,r.Z)({},c,i))),t&&e((0,r.Z)({},c,i))},x=function(){l(n),f({})};return{values:u,setValues:l,handleInputChange:h,resetForm:x,errors:m,setErrors:f}},m=(0,i.Z)((function(n){return{root:{"& .MuiFormControl-root":{width:"100%",marginTop:n.spacing(2),marginBottom:n.spacing(2)}}}}));function f(n){var t=m(),e=n.children,r=(0,a.Z)(n,d);return(0,l.jsx)(u.WS,(0,o.Z)((0,o.Z)({className:t.root},r),{},{children:e}))}},65078:function(n,t,e){e.r(t),e.d(t,{default:function(){return cn}});var a=e(1413),r=e(29439),o=e(4942),c=e(47313),i=e(82295),s=e(1084),u=e(43855),l=e(49845),d=e(74165),p=e(15861),m=e(31881),f=e.n(m),h=e(70816),x=e.n(h),Z=e(50804),v=function(){return function(){var n=(0,p.Z)((0,d.Z)().mark((function n(t){return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f().get("https://dental-app-backend.herokuapp.com/api/appoiments").then((function(n){console.log(n);var e=n.data.map((function(n){var t=x()(n.appoiment_date).add(n.duration,"minutes");return{startDate:new Date(n.appoiment_date),endDate:new Date(t),title:"".concat(n.customer.name," ").concat(n.customer.lastname),status:n.status,phone:n.customer.phone,email:n.customer.email,description:n.description,customerId:n.customer,id:n.id,branchId:n.branchId}}));t(g(e))})).catch((function(n){console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},g=function(n){return{type:Z.V.getAppoiments,payload:n}},b=e(9019),j=e(47131),C=e(88564),y=e(76937),k=e(8130),D=e(46417),w="Demo",I={icon:"".concat(w,"-icon"),textCenter:"".concat(w,"-textCenter"),firstRoom:"".concat(w,"-firstRoom"),secondRoom:"".concat(w,"-secondRoom"),thirdRoom:"".concat(w,"-thirdRoom"),header:"".concat(w,"-header"),commandButton:"".concat(w,"-commandButton")},P=((0,C.ZP)(j.Z)((function(){return(0,o.Z)({},"&.".concat(I.commandButton),{backgroundColor:"rgba(255,255,255,0.65)"})})),(0,C.ZP)(b.ZP)((function(){return(0,o.Z)({},"&.".concat(I.textCenter),{textAlign:"center"})}))),N=(0,C.ZP)(y.Z)((function(n){var t=n.theme.palette;return(0,o.Z)({},"&.".concat(I.icon),{color:t.action.active})})),R=(0,C.ZP)(k.Z)((function(n){var t=n.theme.palette;return(0,o.Z)({},"&.".concat(I.icon),{color:t.action.active})})),T=(0,C.ZP)(l.fi.CommandButton)((function(){return(0,o.Z)({},"&.".concat(I.commandButton),{backgroundColor:"rgba(255,255,255,0.65)"})})),B=function(n){var t=Object.assign({},n),e=t.appointmentData;return(0,D.jsxs)(l.fi.Content,(0,a.Z)((0,a.Z)({},t),{},{appointmentData:e,children:[(0,D.jsxs)(b.ZP,{container:!0,alignItems:"center",children:[(0,D.jsx)(P,{item:!0,xs:2,className:I.textCenter,children:(0,D.jsx)(N,{className:I.icon})}),(0,D.jsx)(b.ZP,{item:!0,xs:10,children:(0,D.jsx)("span",{children:e.phone})})]}),(0,D.jsxs)(b.ZP,{container:!0,alignItems:"center",style:{paddingTop:5},children:[(0,D.jsx)(P,{item:!0,xs:2,className:I.textCenter,children:(0,D.jsx)(R,{className:I.icon})}),(0,D.jsx)(b.ZP,{item:!0,xs:10,children:(0,D.jsx)("span",{children:e.description})})]})]}))},F=function(n){var t=Object.assign({},n);return(0,D.jsx)(T,(0,a.Z)((0,a.Z)({},t),{},{className:I.commandButton}))},E=e(29077),O=e(42251),_=e(42420),S=e(94469),V=e(33604),A=e(61113),q=e(24193),H=e(96467),z=e(11198),L=function(n){var t=n.title,e=n.children,a=n.openPopup,r=n.setOpenPopup,o=n.setRecordForEdit;return(0,D.jsxs)(S.Z,{open:a,style:{padding:2,position:"absolute",top:5},onClose:function(n,t){(t&&"backdropClick"==t||"escapeKeyDown"==t)&&(o(null),r(!1))},children:[(0,D.jsx)(V.Z,{style:{backgroundColor:"rgba(88,183,244,0.8)"},children:(0,D.jsxs)("div",{style:{display:"flex"},children:[(0,D.jsx)(A.Z,{variant:"h6",component:"div",style:{flexGrow:1,color:"white"},children:t}),(0,D.jsx)(q.Z,{style:{fontSize:"15px",color:"white"},onClick:function(){o(null),r(!1)},children:(0,D.jsx)(z.Z,{})})]})}),(0,D.jsx)(H.Z,{dividers:!0,children:e})]})},W=e(23208),M=e(84932),J=e(42695),U=e(8047),G=e(1550),Q=e(23306),$=e(88797),K=e(45394),Y=e(15480),X=e(93190),nn=e(87913),tn={description:"",status:"Pendiente",branchId:0,customerId:null},en=function(n){var t=n.recordForEdit,e=n.addOrEdit,r=n.cancelForm,o=(0,s.v9)((function(n){return n.customers})),i=(0,s.v9)((function(n){return n.branches})),u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=(0,a.Z)({},h);if("customerId"in n&&(t.customerId=n.customerId?"":"Este campo es requerido"),"branchId"in n&&(t.branchId=0!=n.branchId?"":"Este campo es requerido"),x((0,a.Z)({},t)),n==d)return Object.values(t).every((function(n){return""==n}))},l=(0,nn.c)(tn,!0,u),d=l.values,p=l.setValues,m=l.handleInputChange,f=l.resetForm,h=l.errors,x=l.setErrors;(0,c.useEffect)((function(){null!=t&&(t.id?p((0,a.Z)({},t)):p((0,a.Z)((0,a.Z)({},tn),t)))}),[t]);return(0,D.jsxs)("form",{className:"row",style:{marginRight:0,display:"flex"},onSubmit:function(n){n.preventDefault(),u()&&e(d,f)},children:[(0,D.jsx)("div",{className:"col-12",children:(0,D.jsx)(J.Z,{disablePortal:!0,isOptionEqualToValue:function(n,t){return n.id===t.id},id:"combo-box-demo",options:null!==t&&void 0!==t&&t.id?o:o.filter((function(n){return n.status})),value:d.customerId,onChange:function(n,t){m({target:{name:"customerId",value:t}})},getOptionLabel:function(n){return"".concat(n.name," ").concat(n.lastname," - ").concat(n.phone)},renderInput:function(n){return(0,D.jsx)(U.Z,(0,a.Z)((0,a.Z)({},n),{},{label:"Cliente",style:{margin:10},variant:"standard",error:!!h.customerId,helperText:h.customerId?h.customerId:""}))}})}),(0,D.jsxs)(W._,{dateAdapter:X.Z,children:[(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(M.x,{label:"Fecha Inicio",name:"startDate",value:d.startDate,onChange:function(n){m({target:{name:"startDate",value:n}})},renderInput:function(n){return(0,D.jsx)(U.Z,(0,a.Z)((0,a.Z)({},n),{},{style:{width:"100%",margin:10},variant:"standard"}))}})}),(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(M.x,{label:"Fecha Fin",name:"endDate",value:d.endDate,onChange:function(n){m({target:{name:"endDate",value:n}})},renderInput:function(n){return(0,D.jsx)(U.Z,(0,a.Z)((0,a.Z)({},n),{},{style:{margin:10,width:"100%"},variant:"standard"}))}})})]}),(0,D.jsx)("div",{className:"col-12",children:(0,D.jsx)(U.Z,{id:"standard-multiline-static",label:"Comentarios",variant:"standard",multiline:!0,rows:4,name:"description",value:d.description,onChange:m,style:{margin:10,width:"100%"}})}),(0,D.jsx)("div",{className:"col-12",children:(0,D.jsxs)(G.Z,{sx:{m:1,minWidth:"100%"},variant:"standard",children:[(0,D.jsx)(Q.Z,{id:"demo-select-small",children:"Estatus"}),(0,D.jsxs)($.Z,{labelId:"demo-select-small",id:"demo-select-small",name:"status",value:d.status,label:"Estatus",onChange:m,children:[(0,D.jsx)(K.Z,{value:"Pendiente",children:"Pendiente"}),(0,D.jsx)(K.Z,{value:"Confirmada",children:"Confirmada"}),(0,D.jsx)(K.Z,{value:"Cancelada",children:"Cancelada"}),(0,D.jsx)(K.Z,{value:"Realizada",children:"Realizada"})]})]})}),(0,D.jsx)("div",{className:"col-12",children:(0,D.jsxs)(G.Z,{sx:{m:1,minWidth:"100%"},variant:"standard",error:!!h.branchId,children:[(0,D.jsx)(Q.Z,{id:"select-branch",children:"Sucursal"}),(0,D.jsxs)($.Z,{labelId:"select-branch",id:"select-branch",name:"branchId",value:d.branchId,label:"Sucursal",onChange:m,MenuProps:{PaperProps:{sx:{maxHeight:400}}},children:[(0,D.jsx)(K.Z,{value:0,children:"Ninguna"}),(null!==t&&void 0!==t&&t.id?i:i.filter((function(n){return n.status}))).map((function(n){return(0,D.jsxs)(K.Z,{value:n.id,children:[n.id," ",n.name," - ",n.city]},n.id)}))]}),h.branchId?(0,D.jsx)(Y.Z,{error:!!h.branchId,children:h.branchId}):null]})}),(0,D.jsxs)("div",{className:"col-12",style:{textAlignLast:"end",paddingTop:10},children:[(0,D.jsx)(q.Z,{size:"large",style:{textTransform:"none",margin:1,color:"rgba(88,183,244,0.8)"},onClick:function(){r(f)},children:"Cancelar"}),(0,D.jsx)(q.Z,{type:"submit",variant:"contained",color:"primary",size:"large",style:{textTransform:"none",margin:1,backgroundColor:"rgba(88,183,244,0.8)"},children:"Guardar"})]})]})},an=e(56155),rn=e(77166),on={addButton:"".concat("Demo","-addButton")},cn=((0,C.ZP)(_.Z)((function(n){var t=n.theme;return(0,o.Z)({},"&.".concat(on.addButton),{position:"absolute",bottom:t.spacing(10),right:t.spacing(4)})})),function(){var n=(0,s.I0)(),t=(0,s.v9)((function(n){return n.appoiments})),e=(0,s.v9)((function(n){return n.customers})),o=(0,s.v9)((function(n){return n.branches})),m=(0,c.useState)(null),h=(0,r.Z)(m,2),Z=h[0],g=h[1],b=(0,c.useState)("work-week"),j=(0,r.Z)(b,2),C=j[0],y=j[1],k=function(n){y(n)},w=(0,c.useState)(!1),I=(0,r.Z)(w,2),P=I[0],N=I[1];(0,c.useEffect)((function(){0===t.length&&n(v()),0===e.length&&n((0,E.JL)()),0===o.length&&n((0,O.Qq)())}),[]);var R=function(n){var t=Object.assign({},n),e=t.startDate,r=t.endDate;return(0,D.jsx)(l.oR.TimeTableCell,(0,a.Z)((0,a.Z)({},t),{},{onDoubleClick:function(){return A({startDate:e,endDate:r})}}))},T=function(n){var t=Object.assign({},n),e=t.startDate,r=t.endDate;return(0,D.jsx)(l.hU.TimeTableCell,(0,a.Z)((0,a.Z)({},t),{},{onDoubleClick:function(){return A({startDate:e,endDate:r})}}))},_=function(n){var t=Object.assign({},n),e=t.startDate,r=t.endDate;return(0,D.jsx)(l.wq.TimeTableCell,(0,a.Z)((0,a.Z)({},t),{},{onDoubleClick:function(){return A({startDate:e,endDate:r})}}))},S=function(n){var t=Object.assign({},n),e=t.data.status;return(0,D.jsx)(l.JW.Appointment,(0,a.Z)((0,a.Z)({},t),{},{style:"Cancelada"===e?{backgroundColor:"#F73208",borderRadius:"8px"}:"Pendiente"===e?{backgroundColor:"#FFC102",borderRadius:"8px"}:"Confirmada"===e?{backgroundColor:"#14B6CA",borderRadius:"8px"}:{backgroundColor:"#10C53C",borderRadius:"8px"}}))},V=function(n){var t=Object.assign({},n);return(0,D.jsx)(l.fi.Header,(0,a.Z)((0,a.Z)({},t),{},{appointmentData:t.appointmentData,onOpenButtonClick:function(){A(t.appointmentData)}}))},A=function(n){g(n),N(!0)},q=function(t,e){var a=x()(t.endDate).diff(x()(t.startDate),"minutes"),r={branchId:t.branchId,appoiment_date:t.startDate,status:t.status,description:t.description,customerId:t.customerId.id,duration:a};t.id?n(function(n,t){return function(){var e=(0,p.Z)((0,d.Z)().mark((function e(a){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().put("https://dental-app-backend.herokuapp.com/api/appoiments/".concat(t),n).then((function(n){a(v())})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}(r,t.id)):n(function(n){return function(){var t=(0,p.Z)((0,d.Z)().mark((function t(e){return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f().post("https://dental-app-backend.herokuapp.com/api/appoiments",n).then((function(n){e(v())})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()}(r)),e(),g(null),N(!1)},H=function(n){g(null),N(!1),n()};return(0,c.useMemo)((function(){return(0,D.jsx)(D.Fragment,{children:t.length>0?(0,D.jsxs)(i.Z,{children:[(0,D.jsx)(rn.T,{title:"Calendario"}),(0,D.jsxs)(l.b2,{data:t,locale:"es",children:[(0,D.jsx)(u.f7,{defaultCurrentDate:Date.now(),currentViewName:C,onCurrentViewNameChange:k}),(0,D.jsx)(l.hU,{startDayHour:10,endDayHour:19,displayName:"Semana",cell:!0,timeTableCellComponent:T}),(0,D.jsx)(l.hU,{name:"work-week",displayName:"Semana Laboral",excludedDays:[0,6],startDayHour:9,endDayHour:19,timeTableCellComponent:T}),(0,D.jsx)(l.wq,{displayName:"Mes",timeTableCellComponent:_}),(0,D.jsx)(l.oR,{displayName:"Dia",timeTableCellComponent:R}),(0,D.jsx)(l.o8,{}),(0,D.jsx)(l.ZS,{}),(0,D.jsx)(l.w0,{messages:{today:"Hoy"}}),(0,D.jsx)(l.PY,{}),(0,D.jsx)(l.JW,{appointmentComponent:S}),(0,D.jsx)(l.fi,{showOpenButton:!0,headerComponent:V,contentComponent:B,commandButtonComponent:F,showCloseButton:!0})]}),(0,D.jsx)(L,{openPopup:P,setOpenPopup:N,setRecordForEdit:g,title:"Cita",children:(0,D.jsx)(en,{recordForEdit:Z,addOrEdit:q,cancelForm:H})})]}):(0,D.jsx)(an.$,{})})}),[t,S])})},77166:function(n,t,e){e.d(t,{T:function(){return o}});var a=e(61113),r=(e(47313),e(46417)),o=function(n){var t=n.title;return(0,r.jsx)(a.Z,{variant:"h4",style:{textAlign:"left",paddingLeft:15,color:"#fff",lineHeight:"1.4",backgroundColor:"#36A3EA",borderRadius:5,border:"5",fontWeight:"bold"},fontFamily:"Roboto",children:t})}},56155:function(n,t,e){e.d(t,{$:function(){return r}});e(47313);var a=e(46417),r=function(){return(0,a.jsx)("div",{className:"spinner-container",children:(0,a.jsx)("div",{className:"loading-spinner"})})}}}]);