"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[939],{42251:function(n,e,t){t.d(e,{Qq:function(){return i},lq:function(){return p},yd:function(){return s}});var r=t(74165),o=t(15861),c=t(31881),u=t.n(c),a=(t(70816),t(50804)),i=function(){return function(n){u().get("https://dental-app-backend.herokuapp.com/api/branches").then((function(e){console.log(e),n(f(e.data))})).catch((function(n){console.log(n)}))}},s=function(n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("https://dental-app-backend.herokuapp.com/api/branches",n).then((function(n){t(l(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=function(n,e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u().put("https://dental-app-backend.herokuapp.com/api/branches/".concat(e),n).then((function(e){o(d(n))})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},l=function(n){return{type:a.V.createBranch,payload:n}},d=function(n){return{type:a.V.updateBranch,payload:n}},f=function(n){return{type:a.V.getBranches,payload:n}}},20611:function(n,e,t){t.d(e,{Dg:function(){return i},ZD:function(){return p},s2:function(){return s}});var r=t(74165),o=t(15861),c=t(31881),u=t.n(c),a=(t(70816),t(50804)),i=function(){return function(n){u().get("https://dental-app-backend.herokuapp.com/api/products").then((function(e){console.log(e),n(f(e.data))})).catch((function(n){console.log(n)}))}},s=function(n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("https://dental-app-backend.herokuapp.com/api/products",n).then((function(n){t(l(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=function(n,e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u().put("https://dental-app-backend.herokuapp.com/api/products/".concat(e),n).then((function(e){o(d(n))})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},l=function(n){return{type:a.V.createProduct,payload:n}},d=function(n){return{type:a.V.updateProduct,payload:n}},f=function(n){return{type:a.V.getProducts,payload:n}}},51699:function(n,e,t){t.d(e,{Ic:function(){return s},td:function(){return i},yY:function(){return p}});var r=t(74165),o=t(15861),c=t(31881),u=t.n(c),a=t(50804),i=function(){return function(n){u().get("https://dental-app-backend.herokuapp.com/api/providers").then((function(e){console.log(e),n(f(e.data))})).catch((function(n){console.log(n)}))}},s=function(n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("https://dental-app-backend.herokuapp.com/api/providers",n).then((function(n){t(l(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=function(n,e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u().put("https://dental-app-backend.herokuapp.com/api/providers/".concat(e),n).then((function(e){o(d(n))})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},l=function(n){return{type:a.V.createProvider,payload:n}},d=function(n){return{type:a.V.updateProvider,payload:n}},f=function(n){return{type:a.V.getProviders,payload:n}}},30939:function(n,e,t){t.r(e),t.d(e,{default:function(){return M}});var r=t(29439),o=t(97241),c=t(82277),u=t(47313),a=t(1084),i=t(20611),s=t(98456),p=t(1413),l=t(21144),d=t(87913),f=t(7501),h=(t(51111),t(46417)),m={id:0,name:"",description:"",minimum_stock:"",current_stock:"",purchase_price:"",sale_price:"",branchId:"",productCategoryId:"",providerId:""},g=function(n){var e=n.recordForEdit,t=n.addOrEdit,o=n.cancelForm,c=(0,a.v9)((function(n){return n.branches})),i=(0,a.v9)((function(n){return n.providers})),s=(0,a.v9)((function(n){return n.productCategories})),g=(0,u.useState)(!0),x=(0,r.Z)(g,2),v=x[0],Z=x[1],y=(0,d.c)(m),k=y.values,b=y.setValues,j=y.handleInputChange,_=y.resetForm;(0,u.useEffect)((function(){null!=e&&(e.id?(b((0,p.Z)({},e)),1!==e.productCategoryId&&Z(!1)):Z(!0))}),[e]);return(0,h.jsx)(d.l,{onSubmit:function(n){n.preventDefault(),t(k,_)},children:(0,h.jsxs)(l.Z,{container:!0,spacing:3,children:[(0,h.jsxs)(l.Z,{item:!0,xs:12,sm:6,children:[(0,h.jsx)(f.Z.FormInput,{label:"Nombre",name:"name",value:k.name,onChange:j,required:!0}),(0,h.jsx)(f.Z.FormInput,{label:"Descripci\xf3n",name:"description",value:k.description,onChange:j,required:!0}),(0,h.jsx)(f.Z.FormSelect,{name:"productCategoryId",label:"Categoria Producto",value:k.productCategoryId,onChange:function(n){j(n),1!==n.target.value?Z(!1):Z(!0)},items:null!==e&&void 0!==e&&e.id?s:s.filter((function(n){return n.status})),required:!0}),(0,h.jsxs)(l.Z,{container:!0,spacing:1,children:[(0,h.jsx)(l.Z,{item:!0,xs:6,sm:6,children:(0,h.jsx)(f.Z.FormInput,{label:"Stock Actual",name:"current_stock",value:k.current_stock||"",onChange:j,type:"number",required:v})}),(0,h.jsx)(l.Z,{item:!0,xs:6,sm:6,children:(0,h.jsx)(f.Z.FormInput,{label:"Stock Minimo",name:"minimum_stock",value:k.minimum_stock||"",onChange:j,type:"number",required:v})})]})]}),(0,h.jsxs)(l.Z,{item:!0,xs:12,sm:6,children:[(0,h.jsx)(f.Z.FormSelect,{name:"branchId",label:"Sucursal",value:k.branchId,onChange:j,items:null!==e&&void 0!==e&&e.id?c:c.filter((function(n){return n.status})),required:!0}),(0,h.jsx)(f.Z.FormSelect,{name:"providerId",label:"Proveedor",value:k.providerId||"",onChange:j,items:null!==e&&void 0!==e&&e.id?i:i.filter((function(n){return n.status})),required:v}),(0,h.jsx)(f.Z.FormInput,{label:"Precio de Compra",name:"purchase_price",value:k.purchase_price||"",onChange:j,type:"number",required:v}),(0,h.jsx)(f.Z.FormInput,{label:"Precio de Venta",name:"sale_price",value:k.sale_price,onChange:j,type:"number",required:!0})]}),(0,h.jsxs)(l.Z,{item:!0,xs:12,style:{textAlign:"right",paddingTop:5},children:[(0,h.jsx)(f.Z.FormButton,{variant:"text",color:"default",size:"large",text:"Cancelar",onClick:function(){o(_)}}),(0,h.jsx)(f.Z.FormButton,{variant:"contained",color:"primary",type:"submit",size:"large",text:"Guardar"})]})]})})},x=t(40490),v=t.n(x),Z=t(56863),y=t(11163),k=t(8130),b=t(56155),j=t(77166),_=t(16541),I=(t(11901),t(39615)),F=t(70816),C=t.n(F),P=t(64154),w=t(98896),S=t(53321),V=t(99132),q=t(42251),D=t(51699),E=t(33743),T=t(43619),A=t(58228),O=t(40671),Y=function(n){var e=[{title:(0,h.jsx)(_.T,{Icon:y.Z,title:"Nombre"}),field:"name"},{title:(0,h.jsx)(_.T,{Icon:k.Z,title:"Descripci\xf3n"}),field:"description"},{title:(0,h.jsx)(_.T,{Icon:V.Z,title:"Stock Actual"}),field:"current_stock",render:function(n){return n.current_stock||"-"}},{title:(0,h.jsx)(_.T,{Icon:V.Z,title:"Stock Minimo"}),field:"minimum_stock",render:function(n){return n.minimum_stock||"-"}},{title:(0,h.jsx)(_.T,{Icon:S.Z,title:"Precio de Compra"}),field:"purchase_price",type:"currency"},{title:(0,h.jsx)(_.T,{Icon:S.Z,title:"Precio de Venta"}),field:"sale_price",type:"currency"},{title:(0,h.jsx)(_.T,{Icon:Z.Z,title:"Fecha de registro"}),field:"createdAt",type:"date",defaultSort:"desc",render:function(n){return C()(n.createdAt).format("DD/MM/YYYY")}}],t=n.setOpenPopup,r=n.setRecordForEdit,o=(0,a.I0)(),c=(0,a.v9)((function(n){return n.products})),s=(0,a.v9)((function(n){return n.branches})),p=(0,a.v9)((function(n){return n.providers})),l=(0,a.v9)((function(n){return n.productCategories}));return(0,u.useEffect)((function(){0===c.length&&o((0,i.Dg)()),0===s.length&&o((0,q.Qq)()),0===p.length&&o((0,D.td)()),0===l.length&&o((0,E.IG)())}),[]),(0,u.useMemo)((function(){return(0,h.jsx)(h.Fragment,{children:null!=c?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(j.T,{title:"Productos"}),(0,h.jsx)(v(),{localization:I._,icons:P.P,columns:e,data:c,actions:(0,A.Z)("Editar Producto",i.ZD,t,r,o),components:(0,T.Z)(t,r),options:{search:!0,draggable:!1,showTitle:!1,thirdSortClick:!1,searchFieldAlignment:"left",actionsColumnIndex:-1,searchFieldVariant:"outlined",searchFieldStyle:{margin:15},headerStyle:w.i,rowStyle:O.Z}})]}):(0,h.jsx)(b.$,{})})}),[c])},B=(0,o.Z)((function(n){return{pageContent:{margin:n.spacing(3),padding:n.spacing(3)},searchInput:{width:"75%"}}})),M=function(){var n=(0,a.I0)(),e=(0,u.useState)(!1),t=(0,r.Z)(e,2),o=t[0],p=t[1],l=(0,u.useState)(null),d=(0,r.Z)(l,2),f=d[0],m=d[1],x=(B(),function(n){m(null),n(),p(!1)});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.Z,{children:(0,h.jsx)(Y,{setOpenPopup:p,setRecordForEdit:m})}),(0,h.jsx)(s.Y,{openPopup:o,setOpenPopup:p,setRecordForEdit:m,cancelForm:x,title:"Producto",children:(0,h.jsx)(g,{recordForEdit:f,addOrEdit:function(e,t){Object.keys(e).forEach((function(n){""===e[n]&&(e[n]=null)})),0===e.id?(delete e.id,n((0,i.s2)(e))):(delete e.tableData,n((0,i.ZD)(e,e.id))),t(),m(null),p(!1)},cancelForm:x})})]})}}}]);