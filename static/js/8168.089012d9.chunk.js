"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8168],{58168:function(e,n,t){t.r(n),t.d(n,{default:function(){return re}});var a=t(1413),r=t(29439),o=t(4942),c=t(47313),i=t(82295),s=t(1084),u=t(43855),l=t(57908),d=t(74165),m=t(15861),p=t(31881),h=t.n(p),f=t(70816),x=t.n(f),Z=t(50804),b=function(){return function(){var e=(0,m.Z)((0,d.Z)().mark((function e(n){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().get("https://dental-app-backend.herokuapp.com/api/appoiments").then((function(e){console.log(e);var t=e.data.map((function(e){var n=x()(e.appoiment_date).add(e.duration,"minutes");return{startDate:new Date(e.appoiment_date),endDate:new Date(n),title:"".concat(e.customer.name," ").concat(e.customer.lastname),status:e.status,phone:e.customer.phone,email:e.customer.email,description:e.description,customerId:{label:"".concat(e.customer.name," ").concat(e.customer.lastname," - ").concat(e.customer.phone),id:e.customerId},id:e.id,branchId:e.branchId}}));n(j(t))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},j=function(e){return{type:Z.V.getAppoiments,payload:e}},v=t(9019),g=t(47131),C=t(14639),D=t(76937),y=t(8130),I=t(46417),k="Demo",w={icon:"".concat(k,"-icon"),textCenter:"".concat(k,"-textCenter"),firstRoom:"".concat(k,"-firstRoom"),secondRoom:"".concat(k,"-secondRoom"),thirdRoom:"".concat(k,"-thirdRoom"),header:"".concat(k,"-header"),commandButton:"".concat(k,"-commandButton")},P=((0,C.ZP)(g.Z)((function(){return(0,o.Z)({},"&.".concat(w.commandButton),{backgroundColor:"rgba(255,255,255,0.65)"})})),(0,C.ZP)(v.ZP)((function(){return(0,o.Z)({},"&.".concat(w.textCenter),{textAlign:"center"})}))),N=(0,C.ZP)(D.Z)((function(e){var n=e.theme.palette;return(0,o.Z)({},"&.".concat(w.icon),{color:n.action.active})})),B=(0,C.ZP)(y.Z)((function(e){var n=e.theme.palette;return(0,o.Z)({},"&.".concat(w.icon),{color:n.action.active})})),F=(0,C.ZP)(l.fi.CommandButton)((function(){return(0,o.Z)({},"&.".concat(w.commandButton),{backgroundColor:"rgba(255,255,255,0.65)"})})),R=function(e){var n=Object.assign({},e),t=n.appointmentData;return(0,I.jsxs)(l.fi.Content,(0,a.Z)((0,a.Z)({},n),{},{appointmentData:t,children:[(0,I.jsxs)(v.ZP,{container:!0,alignItems:"center",children:[(0,I.jsx)(P,{item:!0,xs:2,className:w.textCenter,children:(0,I.jsx)(N,{className:w.icon})}),(0,I.jsx)(v.ZP,{item:!0,xs:10,children:(0,I.jsx)("span",{children:t.phone})})]}),(0,I.jsxs)(v.ZP,{container:!0,alignItems:"center",style:{paddingTop:5},children:[(0,I.jsx)(P,{item:!0,xs:2,className:w.textCenter,children:(0,I.jsx)(B,{className:w.icon})}),(0,I.jsx)(v.ZP,{item:!0,xs:10,children:(0,I.jsx)("span",{children:t.description})})]})]}))},T=function(e){var n=Object.assign({},e);return(0,I.jsx)(F,(0,a.Z)((0,a.Z)({},n),{},{className:w.commandButton}))},_=function(e){return{type:Z.V.getCustomers,payload:e}},E=function(e){return{type:Z.V.getBranches,payload:e}},O=t(42420),S=t(94469),V=t(33604),H=t(61113),A=t(24193),q=t(96467),z=t(11198),G=function(e){var n=e.title,t=e.children,a=e.openPopup,r=e.setOpenPopup,o=e.setRecordForEdit;return(0,I.jsxs)(S.Z,{open:a,style:{padding:2,position:"absolute",top:5},onClose:function(e,n){n&&"backdropClick"==n&&(o(null),r(!1))},children:[(0,I.jsx)(V.Z,{children:(0,I.jsxs)("div",{style:{display:"flex"},children:[(0,I.jsx)(H.Z,{variant:"h6",component:"div",style:{flexGrow:1},children:n}),(0,I.jsx)(A.Z,{color:"primary",style:{fontSize:"15px"},onClick:function(){o(null),r(!1)},children:(0,I.jsx)(z.Z,{})})]})}),(0,I.jsx)(q.Z,{dividers:!0,children:t})]})},W=t(23208),U=t(7371),J=t(4065),L=t(24631),M=t(1550),Y=t(23306),K=t(49100),Q=t(47903),X=t(15480),$=t(1855);var ee={description:"",status:"Pendiente",branchId:0,customerId:null},ne=function(e){var n=e.recordForEdit,t=e.addOrEdit,i=e.cancelForm,u=(0,s.v9)((function(e){return e.customers})),l=(0,s.v9)((function(e){return e.branches})),d=u.map((function(e){return{label:"".concat(e.name," ").concat(e.lastname," - ").concat(e.phone),id:e.id}})),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=(0,a.Z)({},b);if("customerId"in e&&(n.customerId=e.customerId?"":"Este campo es requerido"),"branchId"in e&&(n.branchId=0!=e.branchId?"":"Este campo es requerido"),j((0,a.Z)({},n)),e==h)return Object.values(n).every((function(e){return""==e}))},p=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0,i=(0,c.useState)(e),s=(0,r.Z)(i,2),u=s[0],l=s[1],d=(0,c.useState)({}),m=(0,r.Z)(d,2),p=m[0],h=m[1],f=function(e){var r=e.target,c=r.name,i=r.value;l((0,a.Z)((0,a.Z)({},u),{},(0,o.Z)({},c,i))),n&&t((0,o.Z)({},c,i))},x=function(){l(e),h({})};return{values:u,setValues:l,handleInputChange:f,resetForm:x,errors:p,setErrors:h}}(ee,!0,m),h=p.values,f=p.setValues,x=p.handleInputChange,Z=p.resetForm,b=p.errors,j=p.setErrors;(0,c.useEffect)((function(){null!=n&&(n.id?f((0,a.Z)({},n)):f((0,a.Z)((0,a.Z)({},ee),n)))}),[n]);return(0,I.jsxs)("form",{className:"row",style:{marginRight:0,display:"flex"},onSubmit:function(e){e.preventDefault(),m()&&t(h,Z)},children:[(0,I.jsx)("div",{className:"col-12",children:(0,I.jsx)(J.Z,{disablePortal:!0,isOptionEqualToValue:function(e,n){return e.id===n.id},id:"combo-box-demo",options:d,value:h.customerId,onChange:function(e,n){x({target:{name:"customerId",value:n}})},renderInput:function(e){return(0,I.jsx)(L.Z,(0,a.Z)((0,a.Z)({},e),{},{label:"Cliente",style:{margin:10},variant:"standard",error:b.customerId,helperText:b.customerId?b.customerId:""}))}})}),(0,I.jsxs)(W._,{dateAdapter:$.Z,children:[(0,I.jsx)("div",{className:"col-md-6",children:(0,I.jsx)(U.x,{label:"Fecha Inicio",name:"startDate",value:h.startDate,onChange:function(e){x({target:{name:"startDate",value:e}})},renderInput:function(e){return(0,I.jsx)(L.Z,(0,a.Z)((0,a.Z)({},e),{},{style:{width:"100%",margin:10},variant:"standard"}))}})}),(0,I.jsx)("div",{className:"col-md-6",children:(0,I.jsx)(U.x,{label:"Fecha Fin",name:"endDate",value:h.endDate,onChange:function(e){x({target:{name:"endDate",value:e}})},renderInput:function(e){return(0,I.jsx)(L.Z,(0,a.Z)((0,a.Z)({},e),{},{style:{margin:10,width:"100%"},variant:"standard"}))}})})]}),(0,I.jsx)("div",{className:"col-12",children:(0,I.jsx)(L.Z,{id:"standard-multiline-static",label:"Comentarios",variant:"standard",multiline:!0,rows:4,name:"description",value:h.description,onChange:x,style:{margin:10,width:"100%"}})}),(0,I.jsx)("div",{className:"col-12",children:(0,I.jsxs)(M.Z,{sx:{m:1,minWidth:"100%"},variant:"standard",children:[(0,I.jsx)(Y.Z,{id:"demo-select-small",children:"Estatus"}),(0,I.jsxs)(K.Z,{labelId:"demo-select-small",id:"demo-select-small",name:"status",value:h.status,label:"Estatus",onChange:x,children:[(0,I.jsx)(Q.Z,{value:"Pendiente",children:"Pendiente"}),(0,I.jsx)(Q.Z,{value:"Confirmada",children:"Confirmada"}),(0,I.jsx)(Q.Z,{value:"Cancelada",children:"Cancelada"}),(0,I.jsx)(Q.Z,{value:"Realizada",children:"Realizada"})]})]})}),(0,I.jsx)("div",{className:"col-12",children:(0,I.jsxs)(M.Z,{sx:{m:1,minWidth:"100%"},variant:"standard",error:b.branchId,children:[(0,I.jsx)(Y.Z,{id:"select-branch",children:"Sucursal"}),(0,I.jsxs)(K.Z,{labelId:"select-branch",id:"select-branch",name:"branchId",value:h.branchId,label:"Sucursal",onChange:x,MenuProps:{PaperProps:{sx:{maxHeight:400}}},children:[(0,I.jsx)(Q.Z,{value:0,children:"Ninguna"}),l.map((function(e){return(0,I.jsxs)(Q.Z,{value:e.id,children:[e.id," ",e.name," - ",e.city]},e.id)}))]}),b.branchId?(0,I.jsx)(X.Z,{error:b.branchId,children:b.branchId}):null]})}),(0,I.jsxs)("div",{className:"col-12",style:{textAlignLast:"end",paddingTop:10},children:[(0,I.jsx)(A.Z,{size:"large",style:{textTransform:"none",margin:1},onClick:function(){i(Z)},children:"Cancelar"}),(0,I.jsx)(A.Z,{type:"submit",variant:"contained",color:"primary",size:"large",style:{textTransform:"none",margin:1},children:"Guardar"})]})]})},te="Demo",ae={content:"".concat(te,"-content"),header:"".concat(te,"-header"),closeButton:"".concat(te,"-closeButton"),buttonGroup:"".concat(te,"-buttonGroup"),button:"".concat(te,"-button"),picker:"".concat(te,"-picker"),wrapper:"".concat(te,"-wrapper"),icon:"".concat(te,"-icon"),textField:"".concat(te,"-textField"),addButton:"".concat(te,"-addButton")},re=((0,C.ZP)(O.Z)((function(e){var n=e.theme;return(0,o.Z)({},"&.".concat(ae.addButton),{position:"absolute",bottom:n.spacing(10),right:n.spacing(4)})})),function(){var e=(0,s.I0)(),n=(0,s.v9)((function(e){return e.appoiments})),t=(0,c.useState)(null),o=(0,r.Z)(t,2),p=o[0],f=o[1],Z=(0,c.useState)("work-week"),j=(0,r.Z)(Z,2),v=j[0],g=j[1],C=(0,c.useState)(!1),D=(0,r.Z)(C,2),y=D[0],k=D[1];(0,c.useEffect)((function(){e(b()),e((function(e){h().get("https://dental-app-backend.herokuapp.com/api/customers").then((function(n){console.log(n),e(_(n.data))})).catch((function(e){console.log(e)}))})),e((function(e){h().get("https://dental-app-backend.herokuapp.com/api/branches").then((function(n){console.log(n),e(E(n.data))})).catch((function(e){console.log(e)}))}))}),[]);var w=function(e){var n=Object.assign({},e),t=n.startDate,r=n.endDate;return(0,I.jsx)(l.hU.TimeTableCell,(0,a.Z)((0,a.Z)({},n),{},{onDoubleClick:function(){return P({startDate:t,endDate:r})}}))},P=function(e){f(e),k(!0)};return(0,I.jsxs)(i.Z,{children:[(0,I.jsxs)(l.b2,{data:n,locale:"es",children:[(0,I.jsx)(u.f7,{defaultCurrentDate:Date.now(),currentViewName:v,onCurrentViewNameChange:function(e){g(e)}}),(0,I.jsx)(l.hU,{startDayHour:10,endDayHour:19,displayName:"Semana",cell:!0,timeTableCellComponent:w}),(0,I.jsx)(l.hU,{name:"work-week",displayName:"Semana Laboral",excludedDays:[0,6],startDayHour:9,endDayHour:19,timeTableCellComponent:w}),(0,I.jsx)(l.wq,{displayName:"Mes",timeTableCellComponent:function(e){var n=Object.assign({},e),t=n.startDate,r=n.endDate;return(0,I.jsx)(l.wq.TimeTableCell,(0,a.Z)((0,a.Z)({},n),{},{onDoubleClick:function(){return P({startDate:t,endDate:r})}}))}}),(0,I.jsx)(l.oR,{displayName:"Dia",timeTableCellComponent:function(e){var n=Object.assign({},e),t=n.startDate,r=n.endDate;return(0,I.jsx)(l.oR.TimeTableCell,(0,a.Z)((0,a.Z)({},n),{},{onDoubleClick:function(){return P({startDate:t,endDate:r})}}))}}),(0,I.jsx)(l.o8,{}),(0,I.jsx)(l.ZS,{}),(0,I.jsx)(l.w0,{messages:{today:"Hoy"}}),(0,I.jsx)(l.PY,{}),(0,I.jsx)(l.JW,{appointmentComponent:function(e){var n=Object.assign({},e),t=n.data.status;return(0,I.jsx)(l.JW.Appointment,(0,a.Z)((0,a.Z)({},n),{},{style:"Cancelada"===t?{backgroundColor:"#F73208",borderRadius:"8px"}:"Pendiente"===t?{backgroundColor:"#FFC102",borderRadius:"8px"}:"Confirmada"===t?{backgroundColor:"#14B6CA",borderRadius:"8px"}:{backgroundColor:"#10C53C",borderRadius:"8px"}}))}}),(0,I.jsx)(l.fi,{showOpenButton:!0,headerComponent:function(e){var n=Object.assign({},e);return(0,I.jsx)(l.fi.Header,(0,a.Z)((0,a.Z)({},n),{},{appointmentData:n.appointmentData,onOpenButtonClick:function(){P(n.appointmentData)}}))},contentComponent:R,commandButtonComponent:T,showCloseButton:!0})]}),(0,I.jsx)(G,{openPopup:y,setOpenPopup:k,setRecordForEdit:f,title:"Formulario cita",children:(0,I.jsx)(ne,{recordForEdit:p,addOrEdit:function(n,t){var a=x()(n.endDate).diff(x()(n.startDate),"minutes"),r={branchId:n.branchId,appoiment_date:n.startDate,status:n.status,description:n.description,customerId:n.customerId.id,duration:a};n.id?e(function(e,n){return function(){var t=(0,m.Z)((0,d.Z)().mark((function t(a){return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h().put("https://dental-app-backend.herokuapp.com/api/appoiments/".concat(n),e).then((function(e){a(b())})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r,n.id)):e(function(e){return function(){var n=(0,m.Z)((0,d.Z)().mark((function n(t){return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h().post("https://dental-app-backend.herokuapp.com/api/appoiments",e).then((function(e){t(b())})).catch((function(e){console.log(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(r)),t(),f(null),k(!1)},cancelForm:function(e){f(null),k(!1),e()}})})]})})}}]);