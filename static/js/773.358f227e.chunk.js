"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[773],{21319:function(n,e,t){t.d(e,{Qq:function(){return u},lq:function(){return l},yd:function(){return s}});var r=t(74165),a=t(15861),o=t(74569),c=t.n(o),i=(t(72426),t(99734)),u=function(){return function(n){c().get("".concat("https://dental-app-backend.herokuapp.com","/api/branches")).then((function(e){console.log(e),n(h(e.data))})).catch((function(n){console.log(n)}))}},s=function(n){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/branches"),n).then((function(n){t(p(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},l=function(n,e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(a){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/branches/").concat(e),n).then((function(e){a(d(n))})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},p=function(n){return{type:i.V.createBranch,payload:n}},d=function(n){return{type:i.V.updateBranch,payload:n}},h=function(n){return{type:i.V.getBranches,payload:n}}},53327:function(n,e,t){t.d(e,{LY:function(){return s},QX:function(){return l},xJ:function(){return u}});var r=t(74165),a=t(15861),o=t(74569),c=t.n(o),i=t(99734),u=function(){return function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("".concat("https://dental-app-backend.herokuapp.com","/api/roles")).then((function(n){e(d(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},s=function(n){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().post("".concat("https://dental-app-backend.herokuapp.com","/api/roles"),n).then((function(n){console.log(n),t(p(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},l=function(n,e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(a){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().put("".concat("https://dental-app-backend.herokuapp.com","/api/roles/").concat(e),n).then((function(n){a(u()),console.log(n)})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},p=function(n){return{type:i.V.createRole,payload:n}},d=function(n){return{type:i.V.getRoles,payload:n}}},31773:function(n,e,t){t.r(e),t.d(e,{default:function(){return G}});var r=t(29439),a=t(38596),o=t(89526),c=t(72791),i=t(60364),u=t(74165),s=t(15861),l=t(74569),p=t.n(l),d=t(99734),h=function(n,e){return function(){var t=(0,s.Z)((0,u.Z)().mark((function t(r){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p().put("".concat("https://dental-app-backend.herokuapp.com","/api/users/").concat(e),n).then((function(e){r(m(n))})).catch((function(n){console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},f=function(n){return{type:d.V.createUser,payload:n}},m=function(n){return{type:d.V.updateUser,payload:n}},v=function(n){return{type:d.V.getUsers,payload:n}},x=t(13365),Z=t(1413),g=t(19737),b=t(96986),j=t(61889),k=t(80184),y={id:0,name:"",lastname:"",roleId:"",branchId:"",phone:"",email:"",password:"",birth_date:new Date,address:""},F=function(n){var e=n.recordForEdit,t=n.addOrEdit,r=n.cancelForm,a=(0,g.c)(y),o=a.values,u=a.setValues,s=a.handleInputChange,l=a.resetForm,p=(0,i.v9)((function(n){return n.branches})),d=(0,i.v9)((function(n){return n.roles}));(0,c.useEffect)((function(){null!=e&&(console.log(e),e.id&&u((0,Z.Z)({},e)))}),[e]);return(0,k.jsx)(g.l,{onSubmit:function(n){n.preventDefault(),t(o,l)},children:(0,k.jsxs)(j.ZP,{container:!0,rowSpacing:0,columnSpacing:2,children:[(0,k.jsx)(j.ZP,{item:!0,xs:6,sm:3,children:(0,k.jsx)(b.Z.FormInput,{label:"Nombre",name:"name",value:o.name,onChange:s,required:!0})}),(0,k.jsx)(j.ZP,{item:!0,xs:6,sm:3,children:(0,k.jsx)(b.Z.FormInput,{label:"Apellido(s)",name:"lastname",value:o.lastname,onChange:s,required:!0})}),(0,k.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(b.Z.FormSelect,{name:"branchId",label:"Sucursal",value:o.branchId,onChange:s,items:null!==e&&void 0!==e&&e.id?p:p.filter((function(n){return n.status})),required:!0})}),(0,k.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,k.jsx)(b.Z.FormInput,{label:"Tel\xe9fono",name:"phone",value:o.phone,onChange:s,required:!0}),(0,k.jsx)(b.Z.FormInput,{label:"Direcci\xf3n",name:"address",value:o.address,onChange:s,required:!0}),(0,k.jsx)(b.Z.FormDatePicker,{name:"birth_date",label:"Fecha de nacimiento",value:o.birth_date,onChange:s,required:!0})]}),(0,k.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,k.jsx)(b.Z.FormSelect,{name:"roleId",label:"Rol",value:o.roleId,onChange:s,items:null!==e&&void 0!==e&&e.id?d:d.filter((function(n){return n.status})),required:!0}),(0,k.jsx)(b.Z.FormInput,{label:"Correo electronico",name:"email",value:o.email,onChange:s,validators:["isEmail"],errorMessages:["Ingresar email v\xe1lido"],required:!0}),(0,k.jsx)(b.Z.FormInput,{label:"Contrase\xf1a",name:"password",value:o.password,onChange:s,required:!0,disabled:e&&!0})]}),(0,k.jsxs)(j.ZP,{item:!0,xs:12,style:{textAlign:"right",paddingTop:5},children:[(0,k.jsx)(b.Z.FormButton,{variant:"text",color:"default",size:"large",text:"Cancelar",onClick:function(){r(l)}}),(0,k.jsx)(b.Z.FormButton,{variant:"contained",color:"primary",type:"submit",size:"large",text:"Guardar"})]})]})})},w=t(15617),I=t.n(w),C=t(83229),z=t(44281),V=t(20376),_=t(40501),S=t(69073),P=t(33437),q=t(85901),E=t(8737),T=t(32818),H=t(5197),M=(t(50872),t(4379)),A=t(72426),D=t.n(A),R=t(28796),B=t(70574),U=t(21319),Y=t(53327),O=t(28881),Q=t(92971),J=t(60132),L=function(n){var e=[{title:(0,k.jsx)(H.T,{Icon:_.Z,title:"Nombre"}),field:"name"},{title:(0,k.jsx)(H.T,{Icon:S.Z,title:"Apellido(s)"}),field:"lastname"},{title:(0,k.jsx)(H.T,{Icon:P.Z,title:"Rol"}),field:"role.name"},{title:(0,k.jsx)(H.T,{Icon:q.Z,title:"Sucursal"}),field:"branch.name"},{title:(0,k.jsx)(H.T,{Icon:C.Z,title:"Tel\xe9fono"}),field:"phone"},{title:(0,k.jsx)(H.T,{Icon:z.Z,title:"Correo Electronico"}),field:"email"},{title:(0,k.jsx)(H.T,{Icon:V.Z,title:"Fecha de registro"}),field:"createdAt",type:"date",defaultSort:"desc",render:function(n){return D()(n.createdAt).format("DD/MM/YYYY")}}],t=n.setOpenPopup,r=n.setRecordForEdit,a=(0,i.I0)(),o=(0,i.v9)((function(n){return n.users})),l=(0,i.v9)((function(n){return n.roles})),d=(0,i.v9)((function(n){return n.branches}));return(0,c.useEffect)((function(){0===l.length&&a((0,Y.xJ)()),0===d.length&&a((0,U.Qq)()),0===o.length&&a(function(){var n=(0,s.Z)((0,u.Z)().mark((function n(e){return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p().get("".concat("https://dental-app-backend.herokuapp.com","/api/users")).then((function(n){console.log(n),e(v(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[]),(0,c.useMemo)((function(){return(0,k.jsx)(k.Fragment,{children:null!=o?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(T.T,{title:"Usuarios"}),(0,k.jsx)(I(),{localization:M._,icons:R.P,columns:e,data:o,actions:(0,O.Z)("Editar Usuario",h,t,r,a),components:(0,Q.Z)(t,r),options:{search:!0,draggable:!1,showTitle:!1,thirdSortClick:!1,searchFieldAlignment:"left",actionsColumnIndex:-1,searchFieldVariant:"outlined",searchFieldStyle:{margin:15},headerStyle:B.i,rowStyle:J.Z}})]}):(0,k.jsx)(E.$,{})})}),[o])},N=(0,a.Z)((function(n){return{pageContent:{margin:n.spacing(3),padding:n.spacing(3)},searchInput:{width:"75%"}}})),G=function(){var n=(0,i.I0)(),e=(0,c.useState)(!1),t=(0,r.Z)(e,2),a=t[0],l=t[1],d=(0,c.useState)(null),m=(0,r.Z)(d,2),v=m[0],Z=m[1];N();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.Z,{children:(0,k.jsx)(L,{setOpenPopup:l,setRecordForEdit:Z})}),(0,k.jsx)(x.Y,{openPopup:a,setOpenPopup:l,setRecordForEdit:Z,title:"Usuario",children:(0,k.jsx)(F,{recordForEdit:v,addOrEdit:function(e,t){0===e.id?(delete e.id,n(function(n){return function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().post("".concat("https://dental-app-backend.herokuapp.com","/api/users"),n).then((function(n){t(f(n.data))})).catch((function(n){console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}(e))):(delete e.tableData,n(h(e,e.id))),t(),Z(null),l(!1)},cancelForm:function(n){n(),Z(null),l(!1)}})})]})}},33437:function(n,e,t){var r=t(95318);e.Z=void 0;var a=r(t(45649)),o=t(80184),c=(0,a.default)([(0,o.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},"0"),(0,o.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},"1")],"AdminPanelSettings");e.Z=c},85901:function(n,e,t){var r=t(95318);e.Z=void 0;var a=r(t(45649)),o=t(80184),c=(0,a.default)((0,o.jsx)("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"}),"Business");e.Z=c}}]);
//# sourceMappingURL=773.358f227e.chunk.js.map