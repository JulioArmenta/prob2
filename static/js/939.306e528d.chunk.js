"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[939],{42251:function(e,n,t){t.d(n,{Qq:function(){return s},lq:function(){return l},yd:function(){return d}});var r=t(74165),o=t(15861),c=t(31881),a=t.n(c),u=(t(70816),t(50804)),i=t(47444),s=function(){return function(e){a().get("".concat("https://dental-app-backend.herokuapp.com","/api/branches")).then((function(n){e(m(n.data))})).catch((function(n){console.log(n),e((0,i.sT)("Ha ocurrido un problema al cargar los registros."))}))}},d=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a().post("".concat("https://dental-app-backend.herokuapp.com","/api/branches"),e).then((function(e){t(p(e.data)),t((0,i.xM)("Registro creado con exito."))})).catch((function(e){t((0,i.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},l=function(e,n){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a().put("".concat("https://dental-app-backend.herokuapp.com","/api/branches/").concat(n),e).then((function(n){o(f(e)),o((0,i.xM)("Registro actualizado con exito."))})).catch((function(e){o((0,i.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return{type:u.V.createBranch,payload:e}},f=function(e){return{type:u.V.updateBranch,payload:e}},m=function(e){return{type:u.V.getBranches,payload:e}}},20611:function(e,n,t){t.d(n,{Dg:function(){return s},ZD:function(){return l},s2:function(){return d}});var r=t(74165),o=t(15861),c=t(31881),a=t.n(c),u=(t(70816),t(50804)),i=t(47444),s=function(){return function(e){a().get("".concat("https://dental-app-backend.herokuapp.com","/api/products")).then((function(n){console.log(n),e(m(n.data))})).catch((function(n){e((0,i.sT)("Ha ocurrido un problema al cargar los registros.")),console.log(n)}))}},d=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a().post("".concat("https://dental-app-backend.herokuapp.com","/api/products"),e).then((function(e){t(p(e.data)),t((0,i.xM)("Registro creado con exito."))})).catch((function(e){t((0,i.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},l=function(e,n){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a().put("".concat("https://dental-app-backend.herokuapp.com","/api/products/").concat(n),e).then((function(n){o(f(e)),o((0,i.xM)("Registro actualizado con exito."))})).catch((function(e){o((0,i.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return{type:u.V.createProduct,payload:e}},f=function(e){return{type:u.V.updateProduct,payload:e}},m=function(e){return{type:u.V.getProducts,payload:e}}},51699:function(e,n,t){t.d(n,{Ic:function(){return d},td:function(){return s},yY:function(){return l}});var r=t(74165),o=t(15861),c=t(31881),a=t.n(c),u=t(50804),i=t(47444),s=function(){return function(e){a().get("".concat("https://dental-app-backend.herokuapp.com","/api/providers")).then((function(n){console.log(n),e(m(n.data))})).catch((function(n){e((0,i.sT)("Ha ocurrido un problema al cargar los registros.")),console.log(n)}))}},d=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a().post("".concat("https://dental-app-backend.herokuapp.com","/api/providers"),e).then((function(e){t(p(e.data)),t((0,i.xM)("Registro creado con exito."))})).catch((function(e){t((0,i.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},l=function(e,n){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a().put("".concat("https://dental-app-backend.herokuapp.com","/api/providers/").concat(n),e).then((function(n){o(f(e)),o((0,i.xM)("Registro actualizado con exito."))})).catch((function(e){o((0,i.sT)("Ha ocurrido un problema, favor de intentar de nuevo.")),console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return{type:u.V.createProvider,payload:e}},f=function(e){return{type:u.V.updateProvider,payload:e}},m=function(e){return{type:u.V.getProviders,payload:e}}},29178:function(e,n,t){t.d(n,{N:function(){return c}});var r=t(29439),o=t(47313);function c(e,n){var t=(0,o.useState)(e),c=(0,r.Z)(t,2),a=c[0],u=c[1];return(0,o.useEffect)((function(){var t=setTimeout((function(){u(e)}),n);return function(){clearTimeout(t)}}),[e,n]),a}},30939:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var r=t(29439),o=t(97241),c=t(82277),a=t(47313),u=t(1084),i=t(20611),s=t(98456),d=t(1413),l=t(21144),p=t(87913),f=t(7501),m=(t(51111),t(29178),t(46417)),h={id:0,name:"",description:"",minimum_stock:"",current_stock:"",purchase_price:"",sale_price:"",branchId:"",productCategoryId:"",providerId:""},g=function(e){var n=e.recordForEdit,t=e.addOrEdit,o=e.cancelForm,c=(0,u.v9)((function(e){return e.branches})),i=(0,u.v9)((function(e){return e.providers})),s=(0,u.v9)((function(e){return e.productCategories})),g=(0,a.useState)(!0),v=(0,r.Z)(g,2),x=v[0],Z=v[1],b=(0,p.c)(h),y=b.values,k=b.setValues,j=b.handleInputChange,_=b.resetForm;(0,a.useEffect)((function(){null!=n&&(n.id?(k((0,d.Z)({},n)),1!==n.productCategoryId&&Z(!1)):Z(!0))}),[n]);return(0,m.jsx)(p.l,{onSubmit:function(e){e.preventDefault(),t(y,_)},children:(0,m.jsxs)(l.Z,{container:!0,spacing:3,children:[(0,m.jsxs)(l.Z,{item:!0,xs:12,sm:6,children:[(0,m.jsx)(f.Z.FormInput,{label:"Nombre",name:"name",value:y.name,onChange:j,required:!0}),(0,m.jsx)(f.Z.FormInput,{label:"Descripci\xf3n",name:"description",value:y.description,onChange:j,required:!0}),(0,m.jsx)(f.Z.FormSelect,{name:"productCategoryId",label:"Categoria Producto",value:y.productCategoryId,onChange:function(e){j(e),1!==e.target.value?Z(!1):Z(!0)},items:null!==n&&void 0!==n&&n.id?s:s.filter((function(e){return e.status})),required:!0}),(0,m.jsxs)(l.Z,{container:!0,spacing:1,children:[(0,m.jsx)(l.Z,{item:!0,xs:6,sm:6,children:(0,m.jsx)(f.Z.FormInput,{label:"Stock Actual",name:"current_stock",value:y.current_stock||"",onChange:j,type:"number",required:x})}),(0,m.jsx)(l.Z,{item:!0,xs:6,sm:6,children:(0,m.jsx)(f.Z.FormInput,{label:"Stock Minimo",name:"minimum_stock",value:y.minimum_stock||"",onChange:j,type:"number",required:x})})]})]}),(0,m.jsxs)(l.Z,{item:!0,xs:12,sm:6,children:[(0,m.jsx)(f.Z.FormSelect,{name:"branchId",label:"Sucursal",value:y.branchId,onChange:j,items:null!==n&&void 0!==n&&n.id?c:c.filter((function(e){return e.status})),required:!0}),(0,m.jsx)(f.Z.FormSelect,{name:"providerId",label:"Proveedor",value:y.providerId||"",onChange:j,items:null!==n&&void 0!==n&&n.id?i:i.filter((function(e){return e.status})),required:x}),(0,m.jsx)(f.Z.FormInput,{label:"Precio de Compra",name:"purchase_price",value:y.purchase_price||"",onChange:j,type:"number",required:x}),(0,m.jsx)(f.Z.FormInput,{label:"Precio de Venta",name:"sale_price",value:y.sale_price,onChange:j,type:"number",required:!0})]}),(0,m.jsxs)(l.Z,{item:!0,xs:12,style:{textAlign:"right",paddingTop:5},children:[(0,m.jsx)(f.Z.FormButton,{variant:"text",color:"default",size:"large",text:"Cancelar",onClick:function(){o(_)}}),(0,m.jsx)(f.Z.FormButton,{variant:"contained",color:"primary",type:"submit",size:"large",text:"Guardar"})]})]})})},v=t(40490),x=t.n(v),Z=t(56863),b=t(11163),y=t(8130),k=t(56155),j=t(77166),_=t(16541),I=(t(11901),t(39615)),F=t(70816),C=t.n(F),T=t(64154),P=t(98896),S=t(53321),w=t(99132),V=t(42251),q=t(51699),E=t(33743),D=t(43619),M=t(58228),H=t(40671),R=function(e){var n=[{title:(0,m.jsx)(_.T,{Icon:b.Z,title:"Nombre"}),field:"name"},{title:(0,m.jsx)(_.T,{Icon:y.Z,title:"Descripci\xf3n"}),field:"description"},{title:(0,m.jsx)(_.T,{Icon:w.Z,title:"Stock Actual"}),field:"current_stock",render:function(e){return e.current_stock||"-"}},{title:(0,m.jsx)(_.T,{Icon:w.Z,title:"Stock Minimo"}),field:"minimum_stock",render:function(e){return e.minimum_stock||"-"}},{title:(0,m.jsx)(_.T,{Icon:S.Z,title:"Precio de Compra"}),field:"purchase_price",type:"currency"},{title:(0,m.jsx)(_.T,{Icon:S.Z,title:"Precio de Venta"}),field:"sale_price",type:"currency"},{title:(0,m.jsx)(_.T,{Icon:Z.Z,title:"Fecha de registro"}),field:"createdAt",type:"date",defaultSort:"desc",render:function(e){return C()(e.createdAt).format("DD/MM/YYYY")}}],t=e.setOpenPopup,r=e.setRecordForEdit,o=(0,u.I0)(),c=(0,u.v9)((function(e){return e.products})),s=(0,u.v9)((function(e){return e.branches})),d=(0,u.v9)((function(e){return e.providers})),l=(0,u.v9)((function(e){return e.productCategories}));return(0,a.useEffect)((function(){0===c.length&&o((0,i.Dg)()),0===s.length&&o((0,V.Qq)()),0===d.length&&o((0,q.td)()),0===l.length&&o((0,E.IG)())}),[]),(0,a.useMemo)((function(){return(0,m.jsx)(m.Fragment,{children:null!=c?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(j.T,{title:"Productos"}),(0,m.jsx)(x(),{localization:I._,icons:T.P,columns:n,data:c,actions:(0,M.Z)("Editar Producto",i.ZD,t,r,o),components:(0,D.Z)(t,r),options:{search:!0,draggable:!1,showTitle:!1,thirdSortClick:!1,searchFieldAlignment:"left",actionsColumnIndex:-1,searchFieldVariant:"outlined",searchFieldStyle:{margin:15},headerStyle:P.i,rowStyle:H.Z}})]}):(0,m.jsx)(k.$,{})})}),[c])},z=(0,o.Z)((function(e){return{pageContent:{margin:e.spacing(3),padding:e.spacing(3)},searchInput:{width:"75%"}}})),A=function(){var e=(0,u.I0)(),n=(0,a.useState)(!1),t=(0,r.Z)(n,2),o=t[0],d=t[1],l=(0,a.useState)(null),p=(0,r.Z)(l,2),f=p[0],h=p[1],v=(z(),function(e){h(null),e(),d(!1)});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.Z,{children:(0,m.jsx)(R,{setOpenPopup:d,setRecordForEdit:h})}),(0,m.jsx)(s.Y,{openPopup:o,setOpenPopup:d,setRecordForEdit:h,cancelForm:v,title:"Producto",children:(0,m.jsx)(g,{recordForEdit:f,addOrEdit:function(n,t){Object.keys(n).forEach((function(e){""===n[e]&&(n[e]=null)})),0===n.id?(delete n.id,e((0,i.s2)(n))):(delete n.tableData,e((0,i.ZD)(n,n.id))),t(),h(null),d(!1)},cancelForm:v})})]})}}}]);