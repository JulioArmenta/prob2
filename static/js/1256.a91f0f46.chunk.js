"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1256],{41256:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var a=t(1413),r=t(29439),o=t(4942),c=t(47313),i=t(82295),s=t(1084),l=t(43855),u=t(57908),d=t(74165),m=t(15861),p=t(31881),h=t.n(p),f=t(70816),x=t.n(f),Z=t(50804),b=function(){return function(){var e=(0,m.Z)((0,d.Z)().mark((function e(n){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().get("https://dental-app-backend.herokuapp.com/api/appoiments").then((function(e){console.log(e);var t=e.data.map((function(e){var n=x()(e.appoiment_date).add(e.duration,"minutes");return{startDate:new Date(e.appoiment_date),endDate:new Date(n),title:"".concat(e.customer.name," ").concat(e.customer.lastname),status:e.status,phone:e.customer.phone,email:e.customer.email,description:e.description,customerId:{label:"".concat(e.customer.name," ").concat(e.customer.lastname," - ").concat(e.customer.phone),id:e.customerId},id:e.id,branchId:e.branchId}}));n(j(t))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},j=function(e){return{type:Z.V.getAppoiments,payload:e}},g=t(9019),v=t(47131),C=t(14639),D=t(76937),y=t(8130),k=t(46417),I="Demo",w={icon:"".concat(I,"-icon"),textCenter:"".concat(I,"-textCenter"),firstRoom:"".concat(I,"-firstRoom"),secondRoom:"".concat(I,"-secondRoom"),thirdRoom:"".concat(I,"-thirdRoom"),header:"".concat(I,"-header"),commandButton:"".concat(I,"-commandButton")},P=((0,C.ZP)(v.Z)((function(){return(0,o.Z)({},"&.".concat(w.commandButton),{backgroundColor:"rgba(255,255,255,0.65)"})})),(0,C.ZP)(g.ZP)((function(){return(0,o.Z)({},"&.".concat(w.textCenter),{textAlign:"center"})}))),N=(0,C.ZP)(D.Z)((function(e){var n=e.theme.palette;return(0,o.Z)({},"&.".concat(w.icon),{color:n.action.active})})),R=(0,C.ZP)(y.Z)((function(e){var n=e.theme.palette;return(0,o.Z)({},"&.".concat(w.icon),{color:n.action.active})})),T=(0,C.ZP)(u.fi.CommandButton)((function(){return(0,o.Z)({},"&.".concat(w.commandButton),{backgroundColor:"rgba(255,255,255,0.65)"})})),F=function(e){var n=Object.assign({},e),t=n.appointmentData;return(0,k.jsxs)(u.fi.Content,(0,a.Z)((0,a.Z)({},n),{},{appointmentData:t,children:[(0,k.jsxs)(g.ZP,{container:!0,alignItems:"center",children:[(0,k.jsx)(P,{item:!0,xs:2,className:w.textCenter,children:(0,k.jsx)(N,{className:w.icon})}),(0,k.jsx)(g.ZP,{item:!0,xs:10,children:(0,k.jsx)("span",{children:t.phone})})]}),(0,k.jsxs)(g.ZP,{container:!0,alignItems:"center",style:{paddingTop:5},children:[(0,k.jsx)(P,{item:!0,xs:2,className:w.textCenter,children:(0,k.jsx)(R,{className:w.icon})}),(0,k.jsx)(g.ZP,{item:!0,xs:10,children:(0,k.jsx)("span",{children:t.description})})]})]}))},_=function(e){var n=Object.assign({},e);return(0,k.jsx)(T,(0,a.Z)((0,a.Z)({},n),{},{className:w.commandButton}))},B=function(e){return{type:Z.V.getCustomers,payload:e}},E=function(e){return{type:Z.V.getBranches,payload:e}},O=t(42420),S=t(94469),H=t(33604),V=t(61113),A=t(24193),q=t(96467),z=t(11198),W=function(e){var n=e.title,t=e.children,a=e.openPopup,r=e.setOpenPopup,o=e.setRecordForEdit;return(0,k.jsxs)(S.Z,{open:a,style:{padding:2,position:"absolute",top:5},onClose:function(e,n){console.log(n),(n&&"backdropClick"==n||"escapeKeyDown"==n)&&(o(null),r(!1))},children:[(0,k.jsx)(H.Z,{style:{backgroundColor:"rgba(88,183,244,0.8)"},children:(0,k.jsxs)("div",{style:{display:"flex"},children:[(0,k.jsx)(V.Z,{variant:"h6",component:"div",style:{flexGrow:1,color:"white"},children:n}),(0,k.jsx)(A.Z,{style:{fontSize:"15px",color:"white"},onClick:function(){o(null),r(!1)},children:(0,k.jsx)(z.Z,{})})]})}),(0,k.jsx)(q.Z,{dividers:!0,children:t})]})},L=t(23208),U=t(7371),G=t(4065),J=t(24631),M=t(1550),$=t(23306),K=t(49100),Y=t(47903),Q=t(15480),X=t(1855);var ee={description:"",status:"Pendiente",branchId:0,customerId:null},ne=function(e){var n=e.recordForEdit,t=e.addOrEdit,i=e.cancelForm,l=(0,s.v9)((function(e){return e.customers})),u=(0,s.v9)((function(e){return e.branches})),d=l.map((function(e){return{label:"".concat(e.name," ").concat(e.lastname," - ").concat(e.phone),id:e.id}})),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=(0,a.Z)({},b);if("customerId"in e&&(n.customerId=e.customerId?"":"Este campo es requerido"),"branchId"in e&&(n.branchId=0!=e.branchId?"":"Este campo es requerido"),j((0,a.Z)({},n)),e==h)return Object.values(n).every((function(e){return""==e}))},p=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0,i=(0,c.useState)(e),s=(0,r.Z)(i,2),l=s[0],u=s[1],d=(0,c.useState)({}),m=(0,r.Z)(d,2),p=m[0],h=m[1],f=function(e){var r=e.target,c=r.name,i=r.value;u((0,a.Z)((0,a.Z)({},l),{},(0,o.Z)({},c,i))),n&&t((0,o.Z)({},c,i))},x=function(){u(e),h({})};return{values:l,setValues:u,handleInputChange:f,resetForm:x,errors:p,setErrors:h}}(ee,!0,m),h=p.values,f=p.setValues,x=p.handleInputChange,Z=p.resetForm,b=p.errors,j=p.setErrors;(0,c.useEffect)((function(){null!=n&&(n.id?f((0,a.Z)({},n)):f((0,a.Z)((0,a.Z)({},ee),n)))}),[n]);return(0,k.jsxs)("form",{className:"row",style:{marginRight:0,display:"flex"},onSubmit:function(e){e.preventDefault(),m()&&t(h,Z)},children:[(0,k.jsx)("div",{className:"col-12",children:(0,k.jsx)(G.Z,{disablePortal:!0,isOptionEqualToValue:function(e,n){return e.id===n.id},id:"combo-box-demo",options:d,value:h.customerId,onChange:function(e,n){x({target:{name:"customerId",value:n}})},renderInput:function(e){return(0,k.jsx)(J.Z,(0,a.Z)((0,a.Z)({},e),{},{label:"Cliente",style:{margin:10},variant:"standard",error:b.customerId,helperText:b.customerId?b.customerId:""}))}})}),(0,k.jsxs)(L._,{dateAdapter:X.Z,children:[(0,k.jsx)("div",{className:"col-md-6",children:(0,k.jsx)(U.x,{label:"Fecha Inicio",name:"startDate",value:h.startDate,onChange:function(e){x({target:{name:"startDate",value:e}})},renderInput:function(e){return(0,k.jsx)(J.Z,(0,a.Z)((0,a.Z)({},e),{},{style:{width:"100%",margin:10},variant:"standard"}))}})}),(0,k.jsx)("div",{className:"col-md-6",children:(0,k.jsx)(U.x,{label:"Fecha Fin",name:"endDate",value:h.endDate,onChange:function(e){x({target:{name:"endDate",value:e}})},renderInput:function(e){return(0,k.jsx)(J.Z,(0,a.Z)((0,a.Z)({},e),{},{style:{margin:10,width:"100%"},variant:"standard"}))}})})]}),(0,k.jsx)("div",{className:"col-12",children:(0,k.jsx)(J.Z,{id:"standard-multiline-static",label:"Comentarios",variant:"standard",multiline:!0,rows:4,name:"description",value:h.description,onChange:x,style:{margin:10,width:"100%"}})}),(0,k.jsx)("div",{className:"col-12",children:(0,k.jsxs)(M.Z,{sx:{m:1,minWidth:"100%"},variant:"standard",children:[(0,k.jsx)($.Z,{id:"demo-select-small",children:"Estatus"}),(0,k.jsxs)(K.Z,{labelId:"demo-select-small",id:"demo-select-small",name:"status",value:h.status,label:"Estatus",onChange:x,children:[(0,k.jsx)(Y.Z,{value:"Pendiente",children:"Pendiente"}),(0,k.jsx)(Y.Z,{value:"Confirmada",children:"Confirmada"}),(0,k.jsx)(Y.Z,{value:"Cancelada",children:"Cancelada"}),(0,k.jsx)(Y.Z,{value:"Realizada",children:"Realizada"})]})]})}),(0,k.jsx)("div",{className:"col-12",children:(0,k.jsxs)(M.Z,{sx:{m:1,minWidth:"100%"},variant:"standard",error:b.branchId,children:[(0,k.jsx)($.Z,{id:"select-branch",children:"Sucursal"}),(0,k.jsxs)(K.Z,{labelId:"select-branch",id:"select-branch",name:"branchId",value:h.branchId,label:"Sucursal",onChange:x,MenuProps:{PaperProps:{sx:{maxHeight:400}}},children:[(0,k.jsx)(Y.Z,{value:0,children:"Ninguna"}),u.map((function(e){return(0,k.jsxs)(Y.Z,{value:e.id,children:[e.id," ",e.name," - ",e.city]},e.id)}))]}),b.branchId?(0,k.jsx)(Q.Z,{error:b.branchId,children:b.branchId}):null]})}),(0,k.jsxs)("div",{className:"col-12",style:{textAlignLast:"end",paddingTop:10},children:[(0,k.jsx)(A.Z,{size:"large",style:{textTransform:"none",margin:1,color:"rgba(88,183,244,0.8)"},onClick:function(){i(Z)},children:"Cancelar"}),(0,k.jsx)(A.Z,{type:"submit",variant:"contained",color:"primary",size:"large",style:{textTransform:"none",margin:1,backgroundColor:"rgba(88,183,244,0.8)"},children:"Guardar"})]})]})},te=t(56155),ae=t(77166),re={addButton:"".concat("Demo","-addButton")},oe=((0,C.ZP)(O.Z)((function(e){var n=e.theme;return(0,o.Z)({},"&.".concat(re.addButton),{position:"absolute",bottom:n.spacing(10),right:n.spacing(4)})})),function(){var e=(0,s.I0)(),n=(0,s.v9)((function(e){return e.appoiments})),t=(0,c.useState)(null),o=(0,r.Z)(t,2),p=o[0],f=o[1],Z=(0,c.useState)("work-week"),j=(0,r.Z)(Z,2),g=j[0],v=j[1],C=(0,c.useState)(!1),D=(0,r.Z)(C,2),y=D[0],I=D[1];(0,c.useEffect)((function(){e(b()),e((function(e){h().get("https://dental-app-backend.herokuapp.com/api/customers").then((function(n){console.log(n),e(B(n.data))})).catch((function(e){console.log(e)}))})),e((function(e){h().get("https://dental-app-backend.herokuapp.com/api/branches").then((function(n){console.log(n),e(E(n.data))})).catch((function(e){console.log(e)}))}))}),[]);var w=function(e){var n=Object.assign({},e),t=n.startDate,r=n.endDate;return(0,k.jsx)(u.hU.TimeTableCell,(0,a.Z)((0,a.Z)({},n),{},{onDoubleClick:function(){return P({startDate:t,endDate:r})}}))},P=function(e){f(e),I(!0)};return(0,k.jsx)(k.Fragment,{children:n.length>0?(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(ae.T,{title:"Calendario"}),(0,k.jsxs)(u.b2,{data:n,locale:"es",children:[(0,k.jsx)(l.f7,{defaultCurrentDate:Date.now(),currentViewName:g,onCurrentViewNameChange:function(e){v(e)}}),(0,k.jsx)(u.hU,{startDayHour:10,endDayHour:19,displayName:"Semana",cell:!0,timeTableCellComponent:w}),(0,k.jsx)(u.hU,{name:"work-week",displayName:"Semana Laboral",excludedDays:[0,6],startDayHour:9,endDayHour:19,timeTableCellComponent:w}),(0,k.jsx)(u.wq,{displayName:"Mes",timeTableCellComponent:function(e){var n=Object.assign({},e),t=n.startDate,r=n.endDate;return(0,k.jsx)(u.wq.TimeTableCell,(0,a.Z)((0,a.Z)({},n),{},{onDoubleClick:function(){return P({startDate:t,endDate:r})}}))}}),(0,k.jsx)(u.oR,{displayName:"Dia",timeTableCellComponent:function(e){var n=Object.assign({},e),t=n.startDate,r=n.endDate;return(0,k.jsx)(u.oR.TimeTableCell,(0,a.Z)((0,a.Z)({},n),{},{onDoubleClick:function(){return P({startDate:t,endDate:r})}}))}}),(0,k.jsx)(u.o8,{}),(0,k.jsx)(u.ZS,{}),(0,k.jsx)(u.w0,{messages:{today:"Hoy"}}),(0,k.jsx)(u.PY,{}),(0,k.jsx)(u.JW,{appointmentComponent:function(e){var n=Object.assign({},e),t=n.data.status;return(0,k.jsx)(u.JW.Appointment,(0,a.Z)((0,a.Z)({},n),{},{style:"Cancelada"===t?{backgroundColor:"#F73208",borderRadius:"8px"}:"Pendiente"===t?{backgroundColor:"#FFC102",borderRadius:"8px"}:"Confirmada"===t?{backgroundColor:"#14B6CA",borderRadius:"8px"}:{backgroundColor:"#10C53C",borderRadius:"8px"}}))}}),(0,k.jsx)(u.fi,{showOpenButton:!0,headerComponent:function(e){var n=Object.assign({},e);return(0,k.jsx)(u.fi.Header,(0,a.Z)((0,a.Z)({},n),{},{appointmentData:n.appointmentData,onOpenButtonClick:function(){P(n.appointmentData)}}))},contentComponent:F,commandButtonComponent:_,showCloseButton:!0})]}),(0,k.jsx)(W,{openPopup:y,setOpenPopup:I,setRecordForEdit:f,title:"Formulario cita",children:(0,k.jsx)(ne,{recordForEdit:p,addOrEdit:function(n,t){var a=x()(n.endDate).diff(x()(n.startDate),"minutes"),r={branchId:n.branchId,appoiment_date:n.startDate,status:n.status,description:n.description,customerId:n.customerId.id,duration:a};n.id?e(function(e,n){return function(){var t=(0,m.Z)((0,d.Z)().mark((function t(a){return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h().put("https://dental-app-backend.herokuapp.com/api/appoiments/".concat(n),e).then((function(e){a(b())})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r,n.id)):e(function(e){return function(){var n=(0,m.Z)((0,d.Z)().mark((function n(t){return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h().post("https://dental-app-backend.herokuapp.com/api/appoiments",e).then((function(e){t(b())})).catch((function(e){console.log(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(r)),t(),f(null),I(!1)},cancelForm:function(e){f(null),I(!1),e()}})})]}):(0,k.jsx)(te.$,{})})})},77166:function(e,n,t){t.d(n,{T:function(){return r}});t(47313);var a=t(46417),r=function(e){var n=e.title;return(0,a.jsx)("h2",{style:{textAlign:"left",paddingLeft:15,color:"#fff",lineHeight:"1.4",backgroundColor:"rgba(88,183,244,0.8)",borderRadius:5,border:"5",fontFamily:"initial"},children:n})}},56155:function(e,n,t){t.d(n,{$:function(){return r}});t(47313);var a=t(46417),r=function(){return(0,a.jsx)("div",{className:"spinner-container",children:(0,a.jsx)("div",{className:"loading-spinner"})})}}}]);